var TC_AAM=TC_AAM||{};var TCMediaAam=TCMediaAam||{version:"1.0.1",debugEnabled:_satellite.getVar("debugEnabled")=="true"||window.localStorage.sdsat_debug=="true",SECTION:1,CATEGORY:2,SUB_CATEGORY:3,metaPropertyMapping:_satellite.getVar("TC_AAM_META_PROPERTY_MAPPING"),searchConfig:_satellite.getVar("TC_AAM_SEARCH_CONFIG"),main:function(){try{TCMediaAam.log("*** Starting CL TC_AAM object population ***");TCMediaAam.initialize();TC_AAM.site=TCMediaAam.retrieveMetaValue("og:site_name")||document.domain;TC_AAM.pageName=TCMediaAam.retrievePage();TC_AAM.section=TCMediaAam.retrieveSection();TC_AAM.category=TCMediaAam.retrieveCategory();TC_AAM.subCategory=TCMediaAam.retrieveSubCategory();TC_AAM.contentTitle=TCMediaAam.retrieveMetaValue("og:title");TC_AAM.contentAuthor=TCMediaAam.retrieveMetaValue("article:author");TCMediaAam.appendSearchRelatedProperties();if(!TCMediaAam.isProdEnvironment()){TCMediaAam.discardTC_AAMProperties()}TCMediaAam.logObject(TC_AAM);TCMediaAam.sendSignal()}catch(e){TCMediaAam.log("Unable to execute CL TC_AAM object population: "+e)}finally{TCMediaAam.log("*** Finished CL TC_AAM object population ***")}},initialize:function(){TCMediaAam.initializeTC_AAM()},initializeTC_AAM:function(){TCMediaAam.log("*** Initializing TC_AAM object");TC_AAM.site="";TC_AAM.pageName="";TC_AAM.section="";TC_AAM.category="";TC_AAM.subCategory="";TC_AAM.device=navigator.platform;TC_AAM.deviceType=navigator.appVersion;TC_AAM.contentId="";TC_AAM.contentTitle="";TC_AAM.contentType="";TC_AAM.contentAuthor="";TC_AAM.referrer=document.referrer;TC_AAM.url=document.URL;TCMediaAam.loadMetaTagValuesToObject("tcaam",TC_AAM)},retrievePage:function(){var e=location.href.indexOf("?")!=-1?location.href.split("?")[0]:location.href;return e.match(/[^\/]+$/)!=null?e.match(/[^\/]+$/)[0]:""},retrieveURLCategorization:function(e){var t=location.pathname.indexOf("?")!=-1?location.pathname.split("?")[0]:location.pathname;var n=t.split("/");if(n!==undefined){return n[e]!==undefined?n[e]:""}else{return""}},retrieveSection:function(){var e=TCMediaAam.retrieveURLCategorization(TCMediaAam.SECTION)||"Homepage";return TCMediaAam.excludePage(e)},retrieveCategory:function(){var e=TCMediaAam.retrieveURLCategorization(TCMediaAam.CATEGORY);return TCMediaAam.excludePage(e)},retrieveSubCategory:function(){var e=TCMediaAam.retrieveURLCategorization(TCMediaAam.SUB_CATEGORY);return TCMediaAam.excludePage(e)},excludePage:function(e){if(typeof e!=="undefined"){return e.indexOf(".")==-1?e:""}return""},retrieveMetaValues:function(e){var t=document.getElementsByTagName("meta");var n=[];for(var r=0;r<t.length;r++){if(t[r].getAttribute("property")==e){n.push(t[r].getAttribute("content"))}}return n},loadMetaTagValuesToObject:function(e,t){var n=document.getElementsByTagName("meta");var r=new RegExp(e);for(var i=0;i<n.length;i++){var s=n[i].getAttribute("property");if(r.test(s)){var o=TCMediaAam.metaPropertyMapping[s];var u=o!=null?TCMediaAam.formatMetaPropertyName(o):s;t[u]=n[i].getAttribute("content")}}return t},formatMetaPropertyName:function(e){return e.replace(/\./g,"_")},retrieveMetaValue:function(e){var t=TCMediaAam.retrieveMetaValues(e);return t!=null&&t[0]!==undefined?t[0]:""},discardTC_AAMProperties:function(){var e=_satellite.getVar("TC_AAM_DISCARD_PREFIX")||"discard_";var t=[];for(var n in TC_AAM){if(TC_AAM.hasOwnProperty(n)){t.push(n)}}for(var r=0;r<t.length;r++){var i=t[r];if(TC_AAM.hasOwnProperty(i)&&i.indexOf(e)==-1){var s=e+i;TC_AAM[s]=TC_AAM[i];delete TC_AAM[i]}}},isProdEnvironment:function(){var e=_satellite.getVar("TC_AAM_PRODUCTION_HOSTS")||[];for(var t=0;t<e.length;t++){if(document.location.hostname==e[t]){return true}}return false},appendSearchRelatedProperties:function(){if(TCMediaAam.isSearchPath()){TC_AAM.section="search";TC_AAM.searchKeywords=TCMediaAam.findSearchKeywords()}},findSearchKeywords:function(){if(TCMediaAam.searchConfig.searchType=="QUERY_STRING"){var e=document.location.search.substring(1).split("&");var t=TCMediaAam.searchConfig.searchParameters||[];for(var n=0;n<t.length;n++){var r=t[n];for(var i=0;i<e.length;i++){var s=e[i].split("=");if(s.length>0&&s[0]==r){return s[1]}}}}return"unknown"},isSearchPath:function(){var e=TCMediaAam.searchConfig.searchPathDiscriminators||[];for(var t=0;t<e.length;t++){if(document.location.pathname.indexOf(e[t])!=-1){return true}}return false},sendSignal:function(){_satellite.getVar("TC_AAM_DIL")},logAvailable:function(){return window.console&&TCMediaAam.debugEnabled},log:function(e){if(TCMediaAam.logAvailable()){window.console.log(e)}},logObject:function(e){if(TCMediaAam.logAvailable()&&window.console.dir){window.console.dir(e)}}};TCMediaAam.main()