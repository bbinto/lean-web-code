(function(e,n,r){function o(e,t){if(!e){throw new Error(t||"Assertion Failure")}}function a(){u.addEventHandler(e,"orientationchange",a.orientationChange)}function f(){this.rules=u.filter(u.rules,function(e){return e.event==="elementexists"})}function l(){this.rules=u.filter(u.rules,function(e){return e.event.substring(0,11)==="videoplayed"});this.eventHandler=u.bind(this.onUpdateTime,this)}function c(){var e=this.eventRegex=/^hover\(([0-9]+)\)$/;var t=this.rules=[];u.each(u.rules,function(n){var r=n.event.match(e);if(r){t.push([Number(n.event.match(e)[1]),n.selector])}})}function h(t){u.domReady(u.bind(function(){this.twttr=t||e.twttr;this.initialize()},this))}function p(e){this.delay=250;this.FB=e;u.domReady(u.bind(function(){u.poll(u.bind(this.initialize,this),this.delay,8)},this))}function d(t){t=t||u.rules;this.rules=u.filter(t,function(e){return e.event==="inview"});this.elements=[];this.eventHandler=u.bind(this.track,this);u.addEventHandler(e,"scroll",this.eventHandler);u.addEventHandler(e,"load",this.eventHandler)}function v(e){u.BaseTool.call(this,e);this.name=e.name||"VisitorID"}function m(e){u.BaseTool.call(this,e)}function g(e){u.BaseTool.call(this,e)}function b(e){u.BaseTool.call(this,e);this.varBindings={};this.events=[];this.products=[];this.customSetupFuns=[]}function w(){u.BaseTool.call(this);this.asyncScriptCallbackQueue=[];this.argsForBlockingScripts=[]}function E(e){u.BaseTool.call(this,e);u.notify("Test & Target: Initializing",1);this.styleElements={};this.myInitialize()}function S(e){u.BaseTool.call(this,e);this.name=e.name||"Basic"}var i=Object.prototype.toString;var s=e._satellite&&e._satellite.override;var u={$data:function(e,t,n){var i="__satellite__";var s=u.dataCache;var o=e[i];if(!o)o=e[i]=u.uuid++;var a=s[o];if(!a)a=s[o]={};if(n===r)return a[t];else a[t]=n},uuid:1,dataCache:{},isArray:Array.isArray||function(e){return i.apply(e)==="[object Array]"},isObject:function(e){return e!=null&&!u.isArray(e)&&typeof e==="object"},isString:function(e){return typeof e==="string"},isNumber:function(e){return i.apply(e)==="[object Number]"&&!u.isNaN(e)},isNaN:function(e){return e!==e},isRegex:function(e){return e instanceof RegExp},isLinkTag:function(e){return!!(e&&e.nodeName&&e.nodeName.toLowerCase()==="a")},each:function(e,t,n){for(var r=0,i=e.length;r<i;r++)t.call(n,e[r],r,e)},map:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++)r.push(t.call(n,e[i],i,e));return r},filter:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];if(t.call(n,o,i,e))r.push(o)}return r},any:function(e,t,n){for(var r=0,i=e.length;r<i;r++){var s=e[r];if(t.call(n,s,r,e))return true}return false},every:function(e,t,n){var r=true;for(var i=0,s=e.length;i<s;i++){var o=e[i];r=r&&t.call(n,o,i,e)}return r},contains:function(e,t){return u.indexOf(e,t)!==-1},indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=e.length;n--;)if(t===e[n])return n;return-1},find:function(e,t,n){var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i];if(t.call(n,o,i,e))return o}return null},textMatch:function(e,t){if(typeof t==="string")return e===t;else if(t instanceof RegExp)return t.test(e);else return false},stringify:function(e,t){t=t||[];if(u.isObject(e)){if(u.contains(t,e)){return"<Cycle>"}else{t.push(e)}}if(u.isArray(e)){return"["+u.map(e,function(e){return u.stringify(e,t)}).join(",")+"]"}else if(u.isString(e)){return'"'+String(e)+'"'}if(u.isObject(e)){var n=[];for(var r in e){n.push(r+": "+u.stringify(e[r],t))}return"{"+n.join(", ")+"}"}else{return String(e)}},trim:function(e){if(e==null)return null;if(e.trim){return e.trim()}else{return e.replace(/^ */,"").replace(/ *$/,"")}},bind:function(e,t){return function(){return e.apply(t,arguments)}},throttle:function(e,t){var n=null;return function(){var r=this,i=arguments;clearTimeout(n);n=setTimeout(function(){e.apply(r,i)},t)}},domReady:function(e){function h(e){c=1;while(e=t.shift())e()}var t=[],r,i=false,s=n,o=s.documentElement,u=o.doScroll,a="DOMContentLoaded",f="addEventListener",l="onreadystatechange",c=/^loade|^c/.test(s.readyState);s[f]&&s[f](a,r=function(){s.removeEventListener(a,r,i);h()},i);u&&s.attachEvent(l,r=function(){if(/^c/.test(s.readyState)){s.detachEvent(l,r);h()}});return e=u?function(n){self!=top?c?n():t.push(n):function(){try{o.doScroll("left")}catch(t){return setTimeout(function(){e(n)},50)}n()}()}:function(e){c?e():t.push(e)}}(),loadScript:function(e,t){var r=n.createElement("script");u.scriptOnLoad(e,r,t);r.src=e;n.getElementsByTagName("head")[0].appendChild(r)},scriptOnLoad:function(e,t,n){function r(e){if(e)u.logError(e);if(n)n(e)}if("onload"in t){t.onload=function(){r()};t.onerror=function(){r(new Error("Failed to load script "+e))}}else if("readyState"in t){t.onreadystatechange=function(){var e=t.readyState;if(e==="loaded"||e==="complete"){t.onreadystatechange=null;r()}}}},loadScriptOnce:function(e,t){if(u.loadedScriptRegistry[e])return;u.loadScript(e,function(n){if(!n){u.loadedScriptRegistry[e]=true}if(t)t(n)})},loadedScriptRegistry:{},loadScriptSync:function(e){if(u.domReadyFired){u.notify('Cannot load sync the "'+e+'" script after DOM Ready.',1);return}n.write('<script src="'+e+'"></script>')},pushAsyncScript:function(e){u.tools["default"].pushAsyncScript(e)},pushBlockingScript:function(e){u.tools["default"].pushBlockingScript(e)},addEventHandler:e.addEventListener?function(e,t,n){e.addEventListener(t,n,false)}:function(e,t,n){e.attachEvent("on"+t,n)},preventDefault:e.addEventListener?function(e){e.preventDefault()}:function(e){e.returnValue=false},stopPropagation:function(e){e.cancelBubble=true;if(e.stopPropagation)e.stopPropagation()},containsElement:function(e,t){return e.contains?e.contains(t):!!(e.compareDocumentPosition(t)&16)},matchesCss:function(t){function r(e,t){var n=t.tagName;if(!n)return false;return e.toLowerCase()===n.toLowerCase()}var i=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector||t.msMatchesSelector;if(i)return function(t,r){if(r===n||r===e)return false;try{return i.call(r,t)}catch(s){return false}};else if(t.querySelectorAll)return function(e,t){var n=t.parentNode;if(!n)return false;if(e.match(/^[a-z]+$/i)){return r(e,t)}try{var i=t.parentNode.querySelectorAll(e);for(var s=i.length;s--;)if(i[s]===t)return true}catch(o){}return false};else{return function(e,t){if(e.match(/^[a-z]+$/i)){return r(e,t)}try{return u.Sizzle.matches(e,[t]).length>0}catch(n){return false}}}}(n.documentElement),cssQuery:function(e){if(e.querySelectorAll)return function(t,n){var r;try{r=e.querySelectorAll(t)}catch(i){r=[]}n(r)};else return function(e,t){if(u.Sizzle){var n;try{n=u.Sizzle(e)}catch(r){n=[]}t(n)}else u.sizzleQueue.push([e,t])}}(n),hasAttr:function(e,t){return e.hasAttribute?e.hasAttribute(t):e[t]!==r},inherit:function(e,t){var n=function(){};n.prototype=t.prototype;e.prototype=new n;e.prototype.constructor=e},extend:function(e,t){for(var n in t)if(t.hasOwnProperty(n))e[n]=t[n]},toArray:function(){try{var e=Array.prototype.slice;e.call(n.documentElement.childNodes,0)[0].nodeType;return function(t){return e.call(t,0)}}catch(t){return function(e){var t=[];for(var n=0,r=e.length;n<r;n++)t.push(e[n]);return t}}}(),equalsIgnoreCase:function(e,t){if(e==null)return t==null;if(t==null)return false;return String(e).toLowerCase()===String(t).toLowerCase()},poll:function(e,t,n){function i(){if(u.isNumber(n)&&r++>=n){return}if(!e()){setTimeout(i,t)}}var r=0;t=t||1e3;i()},escapeForHtml:function(e){if(!e)return e;return e.replace(/\&/g,"&").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#x27;").replace(/\//g,"&#x2F;")}};u.availableTools={};u.availableEventEmitters=[];u.fireOnceEvents=["condition","elementexists"];u.initEventEmitters=function(){u.eventEmitters=u.map(u.availableEventEmitters,function(e){return new e})};u.eventEmitterBackgroundTasks=function(){u.each(u.eventEmitters,function(e){if("backgroundTasks"in e)e.backgroundTasks()})};u.initTools=function(e){var t={"default":new w};var n=u.settings.euCookieName||"sat_track";for(var r in e){var i,s,o;i=e[r];if(i.euCookie){var a=u.readCookie(n)!=="true";if(a)continue}s=u.availableTools[i.engine];if(!s){var f=[];for(var l in u.availableTools){f.push(l)}throw new Error("No tool engine named "+i.engine+", available: "+f.join(",")+".")}o=new s(i);o.id=r;t[r]=o}return t};u.preprocessArguments=function(e,t,n,r){function i(e){return r&&u.isString(e)?e.toLowerCase():e}function s(e){var r={};for(var a in e){if(e.hasOwnProperty(a)){var f=e[a];if(u.isObject(f)){r[a]=s(f)}else if(u.isArray(f)){r[a]=o(f)}else{r[a]=i(u.replace(f,t,n))}}}return r}function o(e,r){var o=[];for(var a=0,f=e.length;a<f;a++){var l=e[a];if(u.isString(l)){l=i(u.replace(l,t,n))}else if(l&&l.constructor===Object){l=s(l)}o.push(l)}return o}if(!e)return e;return o(e,r)};u.execute=function(e,t,n,r){function i(i){var s=r[i||"default"];if(!s)return;try{s.triggerCommand(e,t,n)}catch(o){u.logError(o)}}if(_satellite.settings.hideActivity)return;r=r||u.tools;if(e.engine){var s=e.engine;for(var o in r){var a=r[o];if(a.settings&&a.settings.engine===s)i(o)}}else if(e.tool instanceof Array)u.each(e.tool,function(e){i(e)});else i(e.tool)};u.notify=e.console?function(e,t){if(u.settings.notifications){switch(t){case 1:case 2:case 3:console["log"]("SATELLITE: "+e);break;case 4:console.warn("SATELLITE: "+e);break;case 5:console.error("SATELLITE: "+e);break;default:console["log"]("SATELLITE: Notify called with incorrect priority.")}}}:function(){};u.cleanText=function(e){if(e==null)return null;return u.trim(e).replace(/\s{2,}/g," ").replace(/[^\000-\177]*/g,"")};u.text=function(e){return e.textContent||e.innerText};u.specialProperties={text:u.text,cleanText:function(e){return u.cleanText(u.text(e))}};u.getObjectProperty=function(e,t,n){var i=t.split(".");var s=e;var o=u.specialProperties;var a;for(var f=0,l=i.length;f<l;f++){if(s==null)return r;var c=i[f];if(n&&c.charAt(0)==="@"){var h=c.slice(1);s=o[h](s);continue}if(s.getAttribute&&(a=c.match(/^getAttribute\((.+)\)$/))){var p=a[1];s=s.getAttribute(p);continue}s=s[c]}return s};u.getToolsByType=function(e){if(!e){throw new Error("Tool type is missing")}var n=[];for(t in u.tools){var r=u.tools[t];if(r.settings&&r.settings.engine===e){n.push(r)}}return n};u.setVar=function(){var e=u.data.customVars;if(e==null)u.data.customVars={},e=u.data.customVars;if(typeof arguments[0]==="string"){var t=arguments[0];e[t]=arguments[1]}else if(arguments[0]){var n=arguments[0];for(var r in n)e[r]=n[r]}};u.dataElementSafe=function(e,t){if(arguments.length>2){var n=arguments[2];if(t==="pageview"){u.dataElementSafe.pageviewCache[e]=n}else if(t==="session"){u.setCookie("_sdsat_"+e,n)}else if(t==="visitor"){u.setCookie("_sdsat_"+e,n,365*2)}}else{if(t==="pageview"){return u.dataElementSafe.pageviewCache[e]}else if(t==="session"||t==="visitor"){return u.readCookie("_sdsat_"+e)}}};u.dataElementSafe.pageviewCache={};u.realGetDataElement=function(t){var n;if(t.selector){if(u.hasSelector){u.cssQuery(t.selector,function(e){if(e.length>0){var r=e[0];if(t.property==="text"){n=r.innerText||r.textContent}else if(u.hasAttr(r,t.property)){n=r[t.property]}}})}}else if(t.queryParam){if(t.ignoreCase){n=u.getQueryParamCaseInsensitive(t.queryParam)}else{n=u.getQueryParam(t.queryParam)}}else if(t.cookie){n=u.readCookie(t.cookie)}else if(t.jsVariable){n=u.getObjectProperty(e,t.jsVariable)}else if(t.customJS){n=t.customJS()}return n};u.getDataElement=function(e,t,n){n=n||u.dataElements[e];var i=u.realGetDataElement(n);if(i===r&&n.storeLength){i=u.dataElementSafe(e,n.storeLength)}else if(i!==r&&n.storeLength){u.dataElementSafe(e,n.storeLength,i)}if(i===r&&!t){i=n["default"]||""}if(n.forceLowerCase){i=i.toLowerCase()}return i};u.getVar=function(t,i,s){var o=u.data.customVars,a=s?s.target||s.srcElement:null,f,l;var c={URI:u.data.URI,uri:u.data.URI,protocol:n.location.protocol,hostname:n.location.hostname};if(u.dataElements&&t in u.dataElements){return u.getDataElement(t)}l=c[t];if(l===r){if(t.substring(0,5)==="this."){t=t.slice(5);l=u.getObjectProperty(i,t,true)}else if(t.substring(0,6)==="event."){t=t.slice(6);l=u.getObjectProperty(s,t)}else if(t.substring(0,7)==="target."){t=t.slice(7);l=u.getObjectProperty(a,t)}else if(t.substring(0,7)==="window."){t=t.slice(7);l=u.getObjectProperty(e,t)}else if(t.substring(0,6)==="param."){t=t.slice(6);l=u.getQueryParam(t)}else if(f=t.match(/^rand([0-9]+)$/)){var h=Number(f[1]),p=(Math.random()*(Math.pow(10,h)-1)).toFixed(0);l=Array(h-p.length+1).join("0")+p}else{l=u.getObjectProperty(o,t)}}return l};u.getVars=function(e,t,n){var r={};u.each(e,function(e){r[e]=u.getVar(e,t,n)});return r};u.replace=function(e,t,n){if(typeof e!=="string")return e;return e.replace(/%(.*?)%/g,function(e,r){var i=u.getVar(r,t,n);if(i==null)return e;else return i})};u.searchVariables=function(e,t,n){if(!e||e.length===0)return"";var r=[];for(var i=0,s=e.length;i<s;i++){var o=e[i],a=u.getVar(o,t,n);r.push(o+"="+escape(a))}return"?"+r.join("&")};u.fireRule=function(e,t,n){var r=e.trigger;if(!r)return;for(var i=0,s=r.length;i<s;i++){var o=r[i];u.execute(o,t,n)}if(u.contains(u.fireOnceEvents,e.event))e.expired=true};u.isLinked=function(e){for(var t=e;t;t=t.parentNode){if(u.isLinkTag(t))return true}return false};u.firePageLoadEvent=function(e){var t=n.location,r={type:e,target:t};var i=u.pageLoadRules;for(var s=i.length;s--;){var o=i[s];if(u.ruleMatches(o,r,t)){u.notify('Rule "'+o.name+'" fired.',1);u.fireRule(o,t,r);i.splice(s,1)}}for(var a in u.tools){var f=u.tools[a];if(f.endPLPhase){f.endPLPhase(e)}}};u.track=function(e){e=e.replace(/^\s*/,"").replace(/\s*$/,"");for(var t=0;t<u.directCallRules.length;t++){var n=u.directCallRules[t];if(n.name===e){u.notify('Direct call Rule "'+e+'" fired.',1);u.fireRule(n,location,{type:e});return}}u.notify('Direct call Rule "'+e+'" not found.',1)};u.basePath=function(){if(u.data.host)return(n.location.protocol==="https:"?"https://"+u.data.host.https:"http://"+u.data.host.http)+"/";else return this.settings.basePath};u.setLocation=function(t){e.location=t};u.parseQueryParams=function(e){var t=function(e){var t=e;try{t=decodeURIComponent(e)}catch(n){}return t};if(e===""||u.isString(e)===false)return{};if(e.indexOf("?")===0){e=e.substring(1)}var n={},r=e.split("&");u.each(r,function(e){e=e.split("=");if(!e[1]){return}n[t(e[0])]=u.escapeForHtml(t(e[1]))});return n};u.getCaseSensitivityQueryParamsMap=function(e){var t=u.parseQueryParams(e);var n={};for(var r in t)if(t.hasOwnProperty(r))n[r.toLowerCase()]=t[r];return{normal:t,caseInsensitive:n}};u.QueryParams=u.getCaseSensitivityQueryParamsMap(e.location.search);u.getQueryParam=function(e){return u.QueryParams.normal[e]};u.getQueryParamCaseInsensitive=function(e){return u.QueryParams.caseInsensitive[e.toLowerCase()]};u.encodeObjectToURI=function(e){if(u.isObject(e)===false){return""}var t=[];for(var n in e){if(e.hasOwnProperty(n)){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}}return t.join("&")};u.readCookie=function(e){var t=e+"=";var i=n.cookie.split(";");for(var s=0;s<i.length;s++){var o=i[s];while(o.charAt(0)==" "){o=o.substring(1,o.length)}if(o.indexOf(t)===0){return o.substring(t.length,o.length)}}return r};u.setCookie=function(e,t,r){var i;if(r){var s=new Date;s.setTime(s.getTime()+r*24*60*60*1e3);i="; expires="+s.toGMTString()}else{i=""}n.cookie=e+"="+t+i+"; path=/"};u.removeCookie=function(e){u.setCookie(e,"",-1)};u.getElementProperty=function(e,t){if(t.charAt(0)==="@"){var n=u.specialProperties[t.substring(1)];if(n){return n(e)}}if(t==="innerText"){return u.text(e)}if(t in e)return e[t];return e.getAttribute?e.getAttribute(t):r};u.propertiesMatch=function(e,t){if(e){for(var n in e){var r=e[n];var i=u.getElementProperty(t,n);if(typeof r==="string"&&r!==i)return false;if(r instanceof RegExp&&!r.test(i))return false}}return true};u.ruleMatches=function(e,t,r,i){var s=n.location,o=e.condition,a=e.conditions,f=e.property,l=t.type,c=e.value,h=t.target||t.srcElement,p=r===h;if(e.event!==l)return false;if(e.isDefault&&i>0)return false;if(e.expired)return false;if(l==="inview"&&t.inviewDelay!==e.inviewDelay){return false}if(!(p||e.bubbleFireIfParent!==false&&(i===0||e.bubbleFireIfChildFired!==false)))return false;if(e.selector&&!u.matchesCss(e.selector,r))return false;if(!u.propertiesMatch(f,r))return false;if(c!=null){if(typeof c==="string"){if(c!==r.value)return false}else if(!c.test(r.value))return false}if(o){try{if(!o.call(r,t,h)){u.notify('Condition for rule "'+e.name+'" not met.',1);return false}}catch(d){u.notify('Condition for rule "'+e.name+'" not met. Error: '+d.message,1);return false}}if(a){var v=u.find(a,function(n){try{return!n.call(r,t,h)}catch(i){u.notify('Condition for rule "'+e.name+'" not met. Error: '+i.message,1);return true}});if(v){u.notify("Condition "+v.toString()+' for rule "'+e.name+'" not met.',1);return false}}return true};u.evtHandlers={};u.whenEvent=function(e,t){var n=u.evtHandlers;if(!n[e])n[e]=[];n[e].push(t)};u.isVMLPoisoned=function(e){if(!e)return false;try{e.nodeName}catch(t){if(t.message==="Attribute only valid on v:image"){return true}}return false};u.handleEvent=function(e){if(u.$data(e,"eventProcessed"))return;var t=e.type.toLowerCase(),n=e.target||e.srcElement,r=0,i=u.rules,s=u.tools,o=u.evtHandlers[e.type];if(u.isVMLPoisoned(n)){u.notify("detected "+t+" on poisoned VML element, skipping.",1);return}if(o){u.each(o,function(t){t(e)})}var a=n&&n.nodeName;if(a)u.notify("detected "+t+" on "+n.nodeName,1);else u.notify("detected "+t,1);for(var f=n;f;f=f.parentNode){var l=false;u.each(i,function(t){if(u.ruleMatches(t,e,f,r)){u.notify('Rule "'+t.name+'" fired.',1);u.fireRule(t,f,e);r++;if(t.bubbleStop)l=true}});if(l)break}u.$data(e,"eventProcessed",true)};u.onEvent=n.querySelectorAll?function(e){u.handleEvent(e)}:function(){var e=[];var t=function(t){if(t.selector)e.push(t);else u.handleEvent(t)};t.pendingEvents=e;return t}();u.fireEvent=function(e,t){u.onEvent({type:e,target:t})};u.registerEvents=function(e,t){for(var n=t.length-1;n>=0;n--){var r=t[n];if(!u.$data(e,r+".tracked")){u.addEventHandler(e,r,u.onEvent);u.$data(e,r+".tracked",true)}}};u.registerEventsForTags=function(e,t){for(var r=e.length-1;r>=0;r--){var i=e[r];var s=n.getElementsByTagName(i);for(var o=s.length-1;o>=0;o--)u.registerEvents(s[o],t)}};u.setListeners=function(){u.registerEvents(n,["click","submit"])};u.setFormListeners=function(){u.registerEventsForTags(["input","select","textarea","button"],["select","change","focus","blur","keypress"])};u.setVideoListeners=function(){u.registerEventsForTags(["video"],["play","pause","ended","volumechange","stalled","timeupdate","loadeddata"])};u.readStoredSetting=function(t){if(!e.localStorage)return null;t="sdsat_"+t;return e.localStorage.getItem(t)};u.loadStoredSettings=function(){var e=u.readStoredSetting("debug"),t=u.readStoredSetting("hide_activity");if(e)u.settings.notifications=e==="true";if(t)u.settings.hideActivity=t==="true"};u.isRuleActive=function(e,t){function d(e,t){t=m(t,{hour:e[f](),minute:e[l]()});return Math.floor(Math.abs((e.getTime()-t.getTime())/(1e3*60*60*24)))}function v(e,t){function n(e){return e[o]()*12+e[a]()}return Math.abs(n(e)-n(t))}function m(e,t){var n=new Date(e.getTime());for(var r in t){var i=t[r];switch(r){case"hour":n[c](i);break;case"minute":n[h](i);break;case"date":n[p](i);break}}return n}function g(e,t){var n=e[f](),r=e[l](),i=t[f](),s=t[l]();return n*60+r>i*60+s}function y(e,t){var n=e[f](),r=e[l](),i=t[f](),s=t[l]();return n*60+r<i*60+s}var n=e.schedule;if(!n)return true;var r=n.utc,i=r?"getUTCDate":"getDate",s=r?"getUTCDay":"getDay",o=r?"getUTCFullYear":"getFullYear",a=r?"getUTCMonth":"getMonth",f=r?"getUTCHours":"getHours",l=r?"getUTCMinutes":"getMinutes",c=r?"setUTCHours":"setHours",h=r?"setUTCMinutes":"setMinutes",p=r?"setUTCDate":"setDate";t=t||new Date;if(n.repeat){if(g(n.start,t))return false;if(y(n.end,t))return false;if(t<n.start)return false;if(n.endRepeat&&t>=n.endRepeat)return false;if(n.repeat==="daily"){if(n.repeatEvery){var b=d(n.start,t);if(b%n.repeatEvery!==0)return false}}else if(n.repeat==="weekly"){if(n.days){if(!u.contains(n.days,t[s]()))return false}else if(n.start[s]()!==t[s]())return false;if(n.repeatEvery){var w=d(n.start,t);if(w%(7*n.repeatEvery)!==0)return false}}else if(n.repeat==="monthly"){if(n.repeatEvery){var E=v(n.start,t);if(E%n.repeatEvery!==0)return false}if(n.nthWeek&&n.mthDay){if(n.mthDay!==t[s]())return false;var S=Math.floor((t[i]()-t[s]()+1)/7);if(n.nthWeek!==S)return false}else if(n.start[i]()!==t[i]())return false}else if(n.repeat==="yearly"){if(n.start[a]()!==t[a]())return false;if(n.start[i]()!==t[i]())return false;if(n.repeatEvery){var w=Math.abs(n.start[o]()-t[o]());if(w%n.repeatEvery!==0)return false}}}else{if(n.start>t)return false;if(n.end<t)return false}return true};u.isOutboundLink=function(e){if(!e.getAttribute("href"))return false;var t=e.hostname;var n=e.href;var r=e.protocol;if(r!=="http:"&&r!=="https:")return false;var i=u.any(u.settings.domainList,function(e){return u.isSubdomainOf(t,e)});if(i)return false;return t!==location.hostname};u.isLinkerLink=function(e){if(!e.getAttribute||!e.getAttribute("href"))return false;return u.hasMultipleDomains()&&e.hostname!=location.hostname&&!e.href.match(/^javascript/i)&&!u.isOutboundLink(e)};u.isSubdomainOf=function(e,t){if(e===t)return true;var n=e.length-t.length;if(n>0)return u.equalsIgnoreCase(e.substring(n),t);return false};u.getVisitorId=function(){var e=u.getToolsByType("visitor_id");if(e.length===0){return null}return e[0].getInstance()};u.filterRules=function(){function t(t){if(!u.ruleInScope(t,e))return false;if(!u.isRuleActive(t))return false;return true}var e={hostname:location.hostname,protocol:location.protocol,URI:u.data.URI};u.rules=u.filter(u.rules,t);u.pageLoadRules=u.filter(u.pageLoadRules,t)};u.ruleInScope=function(e,t){function a(e,t){function i(e){return t.match(e)}var n=e.include;var r=e.exclude;if(n&&f(n,t))return true;if(r){if(u.isString(r)&&r===t)return true;if(u.isArray(r)&&u.any(r,i))return true;if(u.isRegex(r)&&i(r))return true}return false}function f(e,t){function n(e){return t.match(e)}if(u.isString(e)&&e!==t)return true;if(u.isArray(e)&&!u.any(e,n))return true;if(u.isRegex(e)&&!n(e))return true;return false}var n=e.scope;if(!n)return true;var r=n.URI;var i=n.subdomains;var s=n.domains;var o=n.protocols;if(r&&a(r,t.URI))return false;if(i&&a(i,t.hostname))return false;if(s&&f(s,t.hostname))return false;if(o&&f(o,t.protocol))return false;return true};u.backgroundTasks=function(){var e=+(new Date);u.setFormListeners();u.setVideoListeners();u.loadStoredSettings();u.registerNewElementsForDynamicRules();u.eventEmitterBackgroundTasks();var t=+(new Date)};u.registerNewElementsForDynamicRules=function(){function e(t,n){var r=e.cache[t];if(r){return n(r)}else{u.cssQuery(t,function(r){e.cache[t]=r;n(r)})}}e.cache={};u.each(u.dynamicRules,function(t){e(t.selector,function(e){u.each(e,function(e){if(u.$data(e,"dynamicRules.seen"))return;u.$data(e,"dynamicRules.seen",true);if(u.propertiesMatch(t.property,e)){u.registerEvents(e,[t.event])}})})})};u.ensureCSSSelector=function(){if(n.querySelectorAll){u.hasSelector=true;return}u.loadingSizzle=true;u.sizzleQueue=[];u.loadScript(u.basePath()+"selector.js",function(){if(!u.Sizzle){u.logError(new Error("Failed to load selector.js"));return}var e=u.onEvent.pendingEvents;u.each(e,function(e){u.handleEvent(e)},this);u.onEvent=u.handleEvent;u.hasSelector=true;delete u.loadingSizzle;u.each(u.sizzleQueue,function(e){u.cssQuery(e[0],e[1])});delete u.sizzleQueue})};u.errors=[];u.logError=function(e){u.errors.push(e);u.notify(e.name+" - "+e.message,5)};u.pageBottom=function(){u.pageBottomFired=true;u.firePageLoadEvent("pagebottom")};u.stagingLibraryOverride=function(){var e=u.readStoredSetting("stagingLibrary")==="true";if(e){var t=n.getElementsByTagName("script"),r=/^(.*)satelliteLib-(.*)\.js$/,i=/^(.*)satelliteLib-(.*)-staging\.js$/,s,o,a;for(var f=0,l=t.length;f<l;f++){a=t[f].getAttribute("src");if(!a)continue;if(!s)s=a.match(r);if(!o)o=a.match(i);if(o)break}if(s&&!o){var c=s[1]+"satelliteLib-"+s[2]+"-staging.js";n.write('<script src="'+c+'"></script>');return true}}return false};u.checkAsyncInclude=function(){if(e.satellite_asyncLoad)u.notify('You may be using the async installation of Satellite. In-page HTML and the "pagebottom" event will not work. Please update your Satellite installation for these features.',5)};u.hasMultipleDomains=function(){return u.settings.domainList.length>1};u.handleOverrides=function(){if(s){for(var e in s){if(s.hasOwnProperty(e)){u.data[e]=s[e]}}}};u.privacyManagerParams=function(){var t={};u.extend(t,u.settings.privacyManagement);var n=[];for(var r in u.tools){var i=u.tools[r];var s=i.settings;if(!s)continue;if(s.engine==="sc"){n.push(i)}}var o=u.map(n,function(t){var n=t.getS();return n&&n.trackingServer||t.getAccount(e.location.hostname)+".112.2o7.net"});t.adobeAnalyticsTrackingServers=o;var a=["bannerText","headline","introductoryText","customCSS"];for(var f=0;f<a.length;f++){var l=a[f];var c=t[l];if(!c)continue;if(c.type==="text"){t[l]=c.value}else if(c.type==="data"){t[l]=u.getVar(c.value)}else{throw new Error("Invalid type: "+c.type)}}return t};u.loadPrivacyManager=function(){var e=u.basePath()+"privacy_manager.js";u.loadScript(e,function(){var e={};var t=u.privacyManager;t.configure(u.privacyManagerParams());t.openIfNewVisitor()})};u.init=function(t){function s(){u.backgroundTasks();setTimeout(s,u.settings.recheckEvery||3e3)}if(u.stagingLibraryOverride())return;u.configurationSettings=t;var n=t.tools;delete t.tools;for(var i in t){u[i]=t[i]}if(u.data.customVars===r)u.data.customVars={};u.data.queryParams=u.QueryParams.normal;u.handleOverrides();u.detectBrowserInfo();if(u.trackVisitorInfo)u.trackVisitorInfo();u.loadStoredSettings();u.checkAsyncInclude();u.ensureCSSSelector();u.filterRules();u.dynamicRules=u.filter(u.rules,function(e){return e.eventHandlerOnElement});u.tools=u.initTools(n);u.initEventEmitters();if(u.settings.forceLowerCase)u.data.URI=u.data.URI.toLowerCase();if(u.settings.privacyManagement){u.loadPrivacyManager()}if(u.hasSelector)u.domReady(u.eventEmitterBackgroundTasks);u.setListeners();u.domReady(s);u.firePageLoadEvent("pagetop");u.domReady(function(){u.domReadyFired=true;if(!u.pageBottomFired)u.pageBottom();u.firePageLoadEvent("domready")});u.addEventHandler(e,"load",function(){u.firePageLoadEvent("windowload")})};u.pageLoadPhases=["pagetop","pagebottom","domready","windowload"];u.loadEventBefore=function(e,t){return u.indexOf(u.pageLoadPhases,e)<=u.indexOf(u.pageLoadPhases,t)};u.flushPendingCalls=function(e){if(e.pending){u.each(e.pending,function(t){var n=t[0],r=t[1],i=t[2],s=t[3];if(n in e)e[n].apply(e,[r,i].concat(s));else if(e.emit)e.emit(n,r,i,s);else u.notify("Failed to trigger "+n+" for tool "+e.id,1)});delete e.pending}};u.setDebug=function(t){if(!e.localStorage)return;e.localStorage.setItem("sdsat_debug",t)};u.detectBrowserInfo=function(){function e(e){return function(t){for(var n in e){var r=e[n];var i=r.test(t);if(i)return n}return"Unknown"}}var t=e({OmniWeb:/OmniWeb/,"Opera Mini":/Opera Mini/,"Opera Mobile":/Opera Mobi/,Opera:/Opera/,"Mobile Safari":/Mobile(\/[0-9A-z]+)? Safari/,Chrome:/Chrome/,Firefox:/Firefox/,"IE Mobile":/IEMobile/,IE:/MSIE/,Safari:/Safari/});var n=e({iOS:/iPhone|iPad|iPod/,Blackberry:/BlackBerry/,"Symbian OS":/SymbOS/,Maemo:/Maemo/,Android:/Android [0-9\.]+;/,Linux:/ Linux /,Unix:/FreeBSD|OpenBSD|CrOS/,Windows:/ Windows /,MacOS:/Macintosh;/});var r=e({iPhone:/iPhone/,iPad:/iPad/,iPod:/iPod/,Nokia:/SymbOS|Maemo/,"Windows Phone":/IEMobile/,Blackberry:/BlackBerry/,Android:/Android [0-9\.]+;/,Desktop:/.*/});var i=navigator.userAgent;u.browserInfo={browser:t(i),os:n(i),deviceType:r(i)}};u.isHttps=function(){return"https:"==n.location.protocol};u.BaseTool=function(e){this.settings=e||{};this.forceLowerCase=u.settings.forceLowerCase;if("forceLowerCase"in this.settings){this.forceLowerCase=this.settings.forceLowerCase}};u.BaseTool.prototype={triggerCommand:function(e,t,n){var r=this.settings||{};if(this.initialize&&this.isQueueAvailable()){if(this.isQueueable(e)&&n&&u.loadEventBefore(n.type,r.loadOn)){this.queueCommand(e,t,n);return}}var i=u.preprocessArguments(e["arguments"],t,n,this.forceLowerCase),s=e.command,o=this["$"+s];if(o){o.apply(this,[t,n].concat(i))}else if(this.$missing$){this.$missing$(s,t,n,i)}else u.notify("Failed to trigger "+s+" for tool "+this.id,1)},endPLPhase:function(e){},isQueueable:function(e){return e.command!=="cancelToolInit"},isQueueAvailable:function(){return!this.initialized&&!this.initializing},flushQueue:function(){if(this.pending){u.each(this.pending,function(e){this.triggerCommand.apply(this,e)},this);this.pending=[]}},queueCommand:function(e,t,n){if(!this.pending)this.pending=[];this.pending.push([e,t,n])},$cancelToolInit:function(){this._cancelToolInit=true}};e._satellite=u;a.orientationChange=function(t){var n=e.orientation===0?"portrait":"landscape";t.orientation=n;u.onEvent(t)};u.availableEventEmitters.push(a);f.prototype.backgroundTasks=function(){u.each(this.rules,function(e){u.cssQuery(e.selector,function(e){if(e.length>0){var t=e[0];if(u.$data(t,"elementexists.seen"))return;u.$data(t,"elementexists.seen",true);u.onEvent({type:"elementexists",target:t})}})})};u.availableEventEmitters.push(f);l.prototype={backgroundTasks:function(){var e=this.eventHandler;u.each(this.rules,function(t){u.cssQuery(t.selector||"video",function(t){u.each(t,function(t){if(u.$data(t,"videoplayed.tracked"))return;u.addEventHandler(t,"timeupdate",u.throttle(e,100));u.$data(t,"videoplayed.tracked",true)})})})},evalRule:function(e,t){var n=t.event,r=e.seekable,i=r.start(0),s=r.end(0),o=e.currentTime,a=t.event.match(/^videoplayed\(([0-9]+)([s%])\)$/);if(!a)return;var f=a[2],l=Number(a[1]);var c=f==="%"?function(){return l<=100*(o-i)/(s-i)}:function(){return l<=o-i};if(!u.$data(e,n)&&c()){u.$data(e,n,true);u.onEvent({type:n,target:e})}},onUpdateTime:function(e){var t=this.rules,n=e.target;if(!n.seekable||n.seekable.length===0)return;for(var r=0,i=t.length;r<i;r++)this.evalRule(n,t[r])}};u.availableEventEmitters.push(l);c.prototype={backgroundTasks:function(){var e=this;u.each(this.rules,function(t){var n=t[1],r=t[0];u.cssQuery(n,function(t){u.each(t,function(t){e.trackElement(t,r)})})},this)},trackElement:function(e,t){var n=this,r=u.$data(e,"hover.delays");if(!r){u.addEventHandler(e,"mouseover",function(t){n.onMouseOver(t,e)});u.addEventHandler(e,"mouseout",function(t){n.onMouseOut(t,e)});u.$data(e,"hover.delays",[t])}else if(!u.contains(r,t)){r.push(t)}},onMouseOver:function(e,t){var n=e.target||e.srcElement,r=e.relatedTarget||e.fromElement,i=(t===n||u.containsElement(t,n))&&!u.containsElement(t,r);if(i)this.onMouseEnter(t)},onMouseEnter:function(e){var t=u.$data(e,"hover.delays");var n=u.map(t,function(t){return setTimeout(function(){u.onEvent({type:"hover("+t+")",target:e})},t)});u.$data(e,"hover.delayTimers",n)},onMouseOut:function(e,t){var n=e.target||e.srcElement,r=e.relatedTarget||e.toElement,i=(t===n||u.containsElement(t,n))&&!u.containsElement(t,r);if(i)this.onMouseLeave(t)},onMouseLeave:function(e){var t=u.$data(e,"hover.delayTimers");if(t)u.each(t,function(e){clearTimeout(e)})}};u.availableEventEmitters.push(c);h.prototype={initialize:function(){var e=this.twttr;if(e&&typeof e.ready==="function"){e.ready(u.bind(this.bind,this))}},bind:function(){this.twttr.events.bind("tweet",function(e){if(e){u.notify("tracking a tweet button",1);u.onEvent({type:"twitter.tweet",target:n})}})}};u.availableEventEmitters.push(h);p.prototype={initialize:function(){this.FB=this.FB||e.FB;if(this.FB&&this.FB.Event&&this.FB.Event.subscribe){this.bind();return true}},bind:function(){this.FB.Event.subscribe("edge.create",function(){u.notify("tracking a facebook like",1);u.onEvent({type:"facebook.like",target:n})});this.FB.Event.subscribe("edge.remove",function(){u.notify("tracking a facebook unlike",1);u.onEvent({type:"facebook.unlike",target:n})});this.FB.Event.subscribe("message.send",function(){u.notify("tracking a facebook share",1);u.onEvent({type:"facebook.send",target:n})})}};u.availableEventEmitters.push(p);d.offset=function(t){var r;try{r=t.getBoundingClientRect()}catch(i){}var s=n,o=s.documentElement;var u=s.body,a=e,f=o.clientTop||u.clientTop||0,l=o.clientLeft||u.clientLeft||0,c=a.pageYOffset||o.scrollTop||u.scrollTop,h=a.pageXOffset||o.scrollLeft||u.scrollLeft,p=r.top+c-f,d=r.left+h-l;return{top:p,left:d}};d.getViewportHeight=function(){var t=e.innerHeight;var r=n.compatMode;if(r){t=r=="CSS1Compat"?n.documentElement.clientHeight:n.body.clientHeight}return t};d.getScrollTop=function(){return n.documentElement.scrollTop?n.documentElement.scrollTop:n.body.scrollTop};d.prototype={backgroundTasks:function(){var e=this.elements,t=this;u.each(this.rules,function(t){u.cssQuery(t.selector,function(n){var r=0;u.each(n,function(t){if(!u.contains(e,t)){e.push(t);r++}});if(r){u.notify(t.selector+" added "+r+" elements.",1)}})});this.track()},elementIsInView:function(e){var t=d.getViewportHeight(),n=d.getScrollTop(),r=d.offset(e).top,i=e.offsetHeight;return!(n>r+i||n+t<r)},checkInView:function(e,t){var n=u.$data(e,"inview");if(this.elementIsInView(e)){if(!n)u.$data(e,"inview",true);var r=this;this.processRules(e,function(n,i,s){if(t||!n.inviewDelay){u.$data(e,i,true);u.onEvent({type:"inview",target:e,inviewDelay:n.inviewDelay})}else if(n.inviewDelay){var o=u.$data(e,s);if(o)clearTimeout(o);o=setTimeout(function(){r.checkInView(e,true)},n.inviewDelay);u.$data(e,s,o)}})}else{if(n)u.$data(e,"inview",false);this.processRules(e,function(t,n,r){var i=u.$data(e,r);if(i){clearTimeout(i)}})}},track:function(){u.each(this.elements,function(e){this.checkInView(e)},this)},processRules:function(e,t){u.each(this.rules,function(n,r){var i=n.inviewDelay?"viewed_"+n.inviewDelay:"viewed";var s="inview_timeout_id_"+r;if(u.$data(e,i))return;if(u.matchesCss(n.selector,e)){t(n,i,s)}})}};u.availableEventEmitters.push(d);u.extend(v.prototype,{getInstance:function(){var e=this.settings;if(!e.mcOrgId){u.notify("Cannot return Visitor ID instance because the Marketing Cloud Organization ID is missing.",4);return null}if(!this.instance){this.instance=new Visitor(e.mcOrgId,e.namespace);this.applyInitVars(this.instance,e.initVars)}return this.instance},applyInitVars:function(e,t){for(var n in t){e[n]=t[n]}u.notify("Visitor ID: set variables.",1)}});u.availableTools.visitor_id=v;u.inherit(m,u.BaseTool);u.extend(m.prototype,{name:"GA",initialize:function(){var t=this.settings;var n=e._gaq,r=t.initCommands||[],i=t.customInit;if(!n){_gaq=[]}if(!this.isSuppressed()){if(!n&&!m.scriptLoaded){var s=u.isHttps();var o=(s?"https://ssl":"http://www")+".google-analytics.com/ga.js";if(t.url){o=s?t.url.https:t.url.http}u.loadScript(o);m.scriptLoaded=true;u.notify("GA: page code loaded.",1)}var a=t.domain,f=t.trackerName,l=y.allowLinker(),c=t.account,h=u.settings.domainList||[];_gaq.push([this.cmd("setAccount"),c]);if(l)_gaq.push([this.cmd("setAllowLinker"),l]);_gaq.push([this.cmd("setDomainName"),y.cookieDomain()]);u.each(r,function(e){var t=[this.cmd(e[0])].concat(e.slice(1));_gaq.push(t)},this);if(i)this.suppressInitialPageView=false===i(_gaq,f);if(t.pageName)this.$overrideInitialPageView(null,null,t.pageName)}else{u.notify("GA: page code not loaded(suppressed).",1)}this.initialized=true;u.fireEvent(this.id+".configure",_gaq,f)},isSuppressed:function(){return this._cancelToolInit||this.settings.initTool===false},tracker:function(){return this.settings.trackerName},cmd:function(e){var t=this.tracker();return t?t+"._"+e:"_"+e},$overrideInitialPageView:function(e,t,n){this.urlOverride=n},trackInitialPageView:function(){if(this.isSuppressed())return;if(this.suppressInitialPageView)return;if(this.urlOverride){var e=u.preprocessArguments([this.urlOverride],location,null,this.forceLowerCase);this.$missing$("trackPageview",null,null,e)}else{this.$missing$("trackPageview")}},endPLPhase:function(e){var t=this.settings.loadOn;if(e===t){u.notify("GA: Initializing at "+e,1);this.initialize();this.flushQueue();this.trackInitialPageView()}},call:function(e,t,n,r){if(this._cancelToolInit)return;var i=this.settings,s=this.tracker(),o=this.cmd(e),r=r?[o].concat(r):[o];_gaq.push(r);if(s)u.notify("GA: sent command "+e+" to tracker "+s+(r.length>1?" with parameters ["+r.slice(1).join(", ")+"]":"")+".",1);else u.notify("GA: sent command "+e+(r.length>1?" with parameters ["+r.slice(1).join(", ")+"]":"")+".",1)},$missing$:function(e,t,n,r){this.call(e,t,n,r)},$postTransaction:function(t,n,r){var i=u.data.customVars.transaction=e[r];this.call("addTrans",t,n,[i.orderID,i.affiliation,i.total,i.tax,i.shipping,i.city,i.state,i.country]);u.each(i.items,function(e){this.call("addItem",t,n,[e.orderID,e.sku,e.product,e.category,e.unitPrice,e.quantity])},this);this.call("trackTrans",t,n)},delayLink:function(e,t){var n=this;if(!y.allowLinker())return;if(!e.hostname.match(this.settings.linkerDomains))return;if(u.isSubdomainOf(e.hostname,location.hostname))return;u.preventDefault(t);var r=u.settings.linkDelay||100;setTimeout(function(){n.call("link",e,t,[e.href])},r)},popupLink:function(t,n){if(!e._gat)return;u.preventDefault(n);var r=this.settings.account;var i=e._gat._createTracker(r);var s=i._getLinkerUrl(t.href);e.open(s)},$link:function(e,t){if(e.getAttribute("target")==="_blank"){this.popupLink(e,t)}else{this.delayLink(e,t)}},$trackEvent:function(e,t){var n=Array.prototype.slice.call(arguments,2);if(n.length>=4&&n[3]!=null){var r=parseInt(n[3],10);if(u.isNaN(r)){r=1}n[3]=r}this.call("trackEvent",e,t,n)}});u.availableTools.ga=m;u.inherit(g,u.BaseTool);u.extend(g.prototype,{name:"GAUniversal",isPageCodeLoadSuppressed:function(){return this.settings.initTool===false||this._cancelToolInit===true},isCallSuppressed:function(){return this._cancelToolInit===true},endPLPhase:function(e){var t=this.settings;var n=t.loadOn;if(this.isPageCodeLoadSuppressed()){u.notify("GAU: Page code not loaded(suppressed).",1);return}if(e===n){u.notify("GAU: Initializing at "+e,1);this.initialize();this.flushQueue();if(this.suppressInitialPageView)return;this.call("send","pageview")}},initialize:function(){var t="ga";e[t]=e[t]||this.createGAObject();e.GoogleAnalyticsObject=t;u.notify("GAU: Page code loaded.",1);u.loadScriptOnce(this.getToolUrl());var n=this.settings;if(y.allowLinker()&&n.allowLinker!==false){this.createAccountForLinker()}else{this.createAccount()}this.executeInitCommands();if(n.customInit){var r=n.customInit;var i=r(e[t],this.getTrackerName());if(i===false){this.suppressInitialPageView=true}}this.initialized=true},getTrackerName:function(){return this.settings.trackerSettings.name||""},createGAObject:function(){var e=function(){e.q.push(arguments)};e.q=[];e.l=1*new Date;return e},create:function(e){var t=this.settings.trackerSettings;if(!t.cookieDomain){t.cookieDomain=y.cookieDomain()}u.extend(t,e||{});this.call("create",t)},createAccount:function(){this.create()},createAccountForLinker:function(){var e={};if(y.allowLinker())e.allowLinker=true;this.create(e);this.call("require","linker");this.call("linker:autoLink",this.autoLinkDomains(),false,true)},autoLinkDomains:function(){var e=location.hostname;return u.filter(u.settings.domainList,function(t){return t!==e})},executeInitCommands:function(){var e=this.settings;if(e.initCommands){u.each(e.initCommands,function(e){this.call.apply(this,e)},this)}},call:function(){if(typeof ga!=="function"){u.notify("GA Universal function not found!",4);return}if(this.isCallSuppressed()){return}arguments[0]=this.cmd(arguments[0]);this.log(u.toArray(arguments));ga.apply(e,arguments)},$missing$:function(e,t,n,r){r=r||[];r=[e].concat(r);this.call.apply(this,r)},getToolUrl:function(){var e=this.settings;var t=u.isHttps();if(e.url){return t?e.url.https:e.url.http}return(t?"https://ssl":"http://www")+".google-analytics.com/analytics.js"},cmd:function(e){var t=["send","set","get"];var n=this.getTrackerName();if(!n||u.indexOf(t,e)===-1){return e}return n+"."+e},log:function(e){var t=e[0];var n=this.getTrackerName()||"default";var r="GA Universal: sent command "+t+" to tracker "+n;if(e.length>1){var i=u.stringify(e.slice(1));r+=" with parameters "+u.stringify(e.slice(1))}r+=".";u.notify(r,1)}});u.availableTools.ga_universal=g;var y={allowLinker:function(){return u.hasMultipleDomains()},cookieDomain:function(){var t=u.settings.domainList;var n=u.find(t,function(t){var n=e.location.hostname;return u.equalsIgnoreCase(n.slice(n.length-t.length),t)});var r=n?"."+n:"auto";return r}};u.inherit(b,u.BaseTool);u.extend(b.prototype,{name:"SC",initialize:function(t){if(this._cancelToolInit)return;this.settings.initVars=this.substituteVariables(this.settings.initVars,{type:t});if(this.settings.initTool!==false){var n=this.settings.sCodeURL||u.basePath()+"s_code.js";if(typeof n==="object"){if(e.location.protocol==="https:")n=n.https;else n=n.http}if(!n.match(/^https?:/))n=u.basePath()+n;if(this.settings.initVars){this.$setVars(null,null,this.settings.initVars)}u.loadScript(n,u.bind(this.onSCodeLoaded,this));this.initializing=true}else{this.initializing=true;this.pollForSC()}},onSCodeLoaded:function(){this.initialized=true;this.initializing=false;u.notify("Adobe Analytics: loaded.",1);this.flushQueueExceptTrackLink();this.sendBeacon();this.flushQueue()},pollForSC:function(){u.poll(u.bind(function(){if(typeof e.s_gi==="function"){u.notify("Adobe Analytics: loaded (manual).",1);this.flushQueue();this.initialized=true;this.initializing=false;return true}},this))},flushQueueExceptTrackLink:function(){if(!this.pending)return;var e=[];for(var t=0;t<this.pending.length;t++){var n=this.pending[t];var r=n[0];if(r.command==="trackLink"){e.push(n)}else{this.triggerCommand.apply(this,n)}}this.pending=e},isQueueAvailable:function(){return!this.initialized},substituteVariables:function(e,t){var n={};for(var r in e){var i=e[r];n[r]=u.replace(i,location,t)}return n},endPLPhase:function(e){var t=this.settings.loadOn;if(e===t){this.initialize(e)}},$setVars:function(e,t,n){for(var r in n){var i=n[r];if(typeof i==="function")i=i();this.varBindings[r]=i}u.notify("Adobe Analytics: set variables.",2)},$customSetup:function(e,t,n){this.customSetupFuns.push(function(r){n.call(e,t,r)})},getAccount:function(t){if(e.s_account){return e.s_account}if(t&&this.settings.accountByHost){return this.settings.accountByHost[t]||this.settings.account}else{return this.settings.account}},isValidSCInstance:function(e){return!!e&&typeof e.t==="function"&&typeof e.tl==="function"},getS:function(t,n){var r=n&&n.hostname||e.location.hostname;var i=this.concatWithToolVarBindings(n&&n.setVars||this.varBindings);var s=n&&n.addEvent||this.events;var o=this.getAccount(r);var a=e.s_gi;if(!a)return null;if(!this.isValidSCInstance(t))t=null;if(!o&&!t){u.notify("Adobe Analytics: tracker not initialized because account was not found",1);return null}var t=t||a(o);if(t.sa&&this.settings.skipSetAccount!==true&&this.settings.initTool!==false)t.sa(this.settings.account);this.applyVarBindingsOnTracker(t,i);if(s.length>0)t.events=s.join(",");var f=u.getVisitorId();if(f){t.visitor=u.getVisitorId()}return t},concatWithToolVarBindings:function(e){var t=this.settings.initVars||{};u.map(["trackingServer","trackingServerSecure"],function(n){if(t[n]&&!e[n]){e[n]=t[n]}});return e},applyVarBindingsOnTracker:function(e,t){for(var n in t){e[n]=t[n]}},clearVarBindings:function(){this.varBindings={}},clearCustomSetup:function(){this.customSetupFuns=[]},sendBeacon:function(){var t=this.getS(e[this.settings.renameS||"s"]);if(!t){u.notify("Adobe Analytics: page code not loaded",1);return}u.fireEvent(this.id+".load",t);if(this.settings.customInit){if(this.settings.customInit(t)===false){u.notify("Adobe Analytics: custom init suppressed beacon",1);return}}if(this.settings.executeCustomPageCodeFirst){this.applyVarBindingsOnTracker(t,this.varBindings)}this.executeCustomSetupFuns(t);t.t();this.clearVarBindings();this.clearCustomSetup();u.notify("Adobe Analytics: tracked page view",1)},executeCustomSetupFuns:function(t){u.each(this.customSetupFuns,function(n){n.call(e,t)})},$trackLink:function(e,t,n){n=n||{};var r=n.type;var i=n.linkName;if(!i&&e&&e.nodeName&&e.nodeName.toLowerCase()==="a"){i=e.innerHTML}if(!i){i="link clicked"}var s=n&&n.setVars;var o=n&&n.addEvent||[];var a=this.getS(null,{setVars:s,addEvent:o});if(!a){u.notify("Adobe Analytics: page code not loaded",1);return}var f=a.linkTrackVars;var l=a.linkTrackEvents;var c=this.definedVarNames(s);if(n&&n.customSetup){n.customSetup.call(e,t,a)}if(o.length>0)c.push("events");if(a.products)c.push("products");c=this.mergeTrackLinkVars(a.linkTrackVars,c);o=this.mergeTrackLinkVars(a.linkTrackEvents,o);a.linkTrackVars=this.getCustomLinkVarsList(c);var h=u.map(o,function(e){return e.split(":")[0]});a.linkTrackEvents=this.getCustomLinkVarsList(h);a.tl(true,r||"o",i);u.notify(["Adobe Analytics: tracked link ","using: linkTrackVars=",u.stringify(a.linkTrackVars),"; linkTrackEvents=",u.stringify(a.linkTrackEvents)].join(""),1);a.linkTrackVars=f;a.linkTrackEvents=l},mergeTrackLinkVars:function(e,t){if(e){t=e.split(",").concat(t)}return t},getCustomLinkVarsList:function(e){var t=u.indexOf(e,"None");if(t>-1&&e.length>1){e.splice(t,1)}return e.join(",")},definedVarNames:function(e){e=e||this.varBindings;var t=[];for(var n in e){if(/^(eVar[0-9]+)|(prop[0-9]+)$/.test(n))t.push(n)}return t},$trackPageView:function(e,t,n){var r=n&&n.setVars;var i=n&&n.addEvent||[];var s=this.getS(null,{setVars:r,addEvent:i});if(!s){u.notify("Adobe Analytics: page code not loaded",1);return}s.linkTrackVars="";s.linkTrackEvents="";this.executeCustomSetupFuns(s);if(n&&n.customSetup){n.customSetup.call(e,t,s)}s.t();this.clearVarBindings();this.clearCustomSetup();u.notify("Adobe Analytics: tracked page view",1)},$postTransaction:function(t,n,r){var i=u.data.transaction=e[r],s=this.varBindings,o=this.settings.fieldVarMapping;u.each(i.items,function(e){this.products.push(e)},this);s.products=u.map(this.products,function(e){var t=[];if(o&&o.item){for(var n in o.item){var r=o.item[n];t.push(r+"="+e[n]);if(r.substring(0,5)==="event")this.events.push(r)}}var i=["",e.product,e.quantity,e.unitPrice*e.quantity];if(t.length>0)i.push(t.join("|"));return i.join(";")},this).join(",");if(o&&o.transaction){var a=[];for(var f in o.transaction){var r=o.transaction[f];a.push(r+"="+i[f]);if(r.substring(0,5)==="event")this.events.push(r)}if(s.products.length>0)s.products+=",";s.products+=";;;;"+a.join("|")}},$addEvent:function(e,t){for(var n=2,r=arguments.length;n<r;n++){this.events.push(arguments[n])}},$addProduct:function(e,t){for(var n=2,r=arguments.length;n<r;n++){this.products.push(arguments[n])}}});u.availableTools.sc=b;u.inherit(w,u.BaseTool);u.extend(w.prototype,{name:"Default",$loadIframe:function(t,n,r){var i=r.pages,s=r.loadOn;var o=u.bind(function(){u.each(i,function(e){this.loadIframe(t,n,e)},this)},this);if(!s)o();if(s==="domready")u.domReady(o);if(s==="load")u.addEventHandler(e,"load",o)},loadIframe:function(e,t,r){var i=n.createElement("iframe");i.style.display="none";var s=u.data.host,o=r.data,a=this.scriptURL(r.src),f=u.searchVariables(o,e,t);if(s)a=u.basePath()+a;a+=f;i.src=a;var l=n.getElementsByTagName("body")[0];if(l)l.appendChild(i);else u.domReady(function(){n.getElementsByTagName("body")[0].appendChild(i)})},scriptURL:function(e){var t=u.settings.scriptDir||"";return t+e},$loadScript:function(t,n,r){var i=r.scripts,s=r.sequential,o=r.loadOn;var a=u.bind(function(){if(s){this.loadScripts(t,n,i)}else{u.each(i,function(e){this.loadScripts(t,n,[e])},this)}},this);if(!o)a();else if(o==="domready")u.domReady(a);else if(o==="load")u.addEventHandler(e,"load",a)},loadScripts:function(e,t,n){function f(){if(r.length>0&&i){var a=r.shift();a.call(e,t,s)}var l=n.shift();if(l){var c=u.data.host,h=o.scriptURL(l.src);if(c)h=u.basePath()+h;u.loadScript(h,f);i=l}}try{var n=n.slice(0),r=this.asyncScriptCallbackQueue,i,s=t.target||t.srcElement,o=this}catch(a){console.error("scripts is",u.stringify(n))}f()},$loadBlockingScript:function(e,t,n){var r=n.scripts,i=n.loadOn;var s=u.bind(function(){u.each(r,function(n){this.loadBlockingScript(e,t,n)},this)},this);s()},loadBlockingScript:function(e,t,n){var r=this.scriptURL(n.src),i=u.data.host,s=t.target||t.srcElement;if(i)r=u.basePath()+r;this.argsForBlockingScripts.push([e,t,s]);u.loadScriptSync(r)},pushAsyncScript:function(e){this.asyncScriptCallbackQueue.push(e)},pushBlockingScript:function(e){var t=this.argsForBlockingScripts.shift();var n=t[0];e.apply(n,t.slice(1))},$writeHTML:function(e,t){if(u.domReadyFired){u.notify("Command writeHTML failed. You may be using an async installation of Satellite.",1);return}if(t.type!=="pagebottom"&&t.type!=="pagetop"){u.notify("You can only use writeHTML on the `pagetop` and `pagebottom` events.",1);return}for(var r=2,i=arguments.length;r<i;r++){var s=arguments[r].html;s=u.replace(s,e,t);n.write(s)}},linkNeedsDelayActivate:function(t,n){n=n||e;var r=t.tagName,i=t.getAttribute("target");if(r&&r.toLowerCase()!=="a")return false;if(!i)return true;else if(i==="_blank")return false;else if(i==="_top")return n.top===n;else if(i==="_parent")return false;else if(i==="_self")return true;else if(n.name)return i===n.name;else return true},$delayActivateLink:function(e,t){if(!this.linkNeedsDelayActivate(e))return;u.preventDefault(t);var n=u.settings.linkDelay||100;setTimeout(function(){u.setLocation(e.href)},n)},isQueueable:function(e){return e.command!=="writeHTML"}});u.availableTools["default"]=w;u.inherit(E,u.BaseTool);u.extend(E.prototype,{name:"tnt",myInitialize:function(){var t=this.settings.mboxURL;if(typeof t==="object"){if(e.location.protocol==="https:")t=t.https;else t=t.http}if(!t.match(/^https?:/))t=u.basePath()+t;if(this.settings.initTool!==false){if(this.settings.loadSync){u.loadScriptSync(t);this.onScriptLoaded()}else{u.loadScript(t,u.bind(this.onScriptLoaded,this));this.initializing=true}}else{this.initialized=true}},onScriptLoaded:function(){u.notify("Test & Target: loaded.",1);this.flushQueue();this.initialized=true;this.initializing=false},$addMbox:function(e,t,n){var r=n.mboxGoesAround;var i=r+"{visibility: hidden;}";var s=this.appendStyle(i);if(!(r in this.styleElements)){this.styleElements[r]=s}if(this.initialized){this.$addMBoxStep2(null,null,n)}else if(this.initializing){this.queueCommand({command:"addMBoxStep2",arguments:[n]},e,t)}},$addMBoxStep2:function(t,r,i){var s=this.generateID();var o=this;u.addEventHandler(e,"load",u.bind(function(){u.cssQuery(i.mboxGoesAround,function(t){var r=t[0];if(!r)return;var u=n.createElement("div");u.id=s;r.parentNode.replaceChild(u,r);u.appendChild(r);e.mboxDefine(s,i.mboxName);var a=[i.mboxName];if(i.arguments){a=a.concat(i.arguments)}e.mboxUpdate.apply(null,a);o.reappearWhenCallComesBack(r,s,i.timeout,i)})},this));this.lastMboxID=s},generateID:function(){var e="_sdsat_mbox_"+String(Math.random()).substring(2)+"_";return e},appendStyle:function(e){var t=n.getElementsByTagName("head")[0],r=n.createElement("style");r.type="text/css";if(r.styleSheet){r.styleSheet.cssText=e}else{r.appendChild(n.createTextNode(e))}t.appendChild(r);return r},reappearWhenCallComesBack:function(e,t,n,r){function s(){var e=i.styleElements[r.mboxGoesAround];if(e){e.parentNode.removeChild(e);delete i.styleElements[r.mboxGoesAround]}}var i=this;u.cssQuery('script[src*="omtrdc.net"]',function(e){var t=e[0];if(t){u.scriptOnLoad(t.src,t,function(){u.notify("Test & Target: request complete",1);s();clearTimeout(r)});var r=setTimeout(function(){u.notify("Test & Target: bailing after "+n+"ms",1);s()},n)}else{u.notify("Test & Target: failed to find T&T ajax call, bailing",1);s()}})}});u.availableTools.tnt=E;u.inherit(S,u.BaseTool);u.extend(S.prototype,{initialize:function(){var e=this.settings;if(this.settings.initTool!==false){var t=e.url;if(typeof t==="string"){t=u.basePath()+t}else{t=u.isHttps()?t.https:t.http}u.loadScript(t,u.bind(this.onLoad,this));this.initializing=true}else{this.initialized=true}},isQueueAvailable:function(){return!this.initialized},onLoad:function(){this.initialized=true;this.initializing=false;if(this.settings.initialBeacon){this.settings.initialBeacon()}this.flushQueue()},endPLPhase:function(e){var t=this.settings.loadOn;if(e===t){u.notify(this.name+": Initializing at "+e,1);this.initialize()}},$fire:function(e,t,n){if(this.initializing){this.queueCommand({command:"fire",arguments:[n]},e,t);return}n.call(this.settings,e,t)}});u.availableTools.am=S;u.availableTools.adlens=S;u.ecommerce={addItem:function(){var e=[].slice.call(arguments);u.onEvent({type:"ecommerce.additem",target:e})},addTrans:function(){var e=[].slice.call(arguments);u.data.saleData.sale={orderId:e[0],revenue:e[2]};u.onEvent({type:"ecommerce.addtrans",target:e})},trackTrans:function(){u.onEvent({type:"ecommerce.tracktrans",target:[]})}};_satellite.init({tools:{},pageLoadRules:[{name:"Add Hash Change Listener",trigger:[{command:"loadScript",arguments:[{sequential:true,scripts:[{src:"satellite-539a003ad2fe87002d0002fe.js",data:[]}]}]}],scope:{subdomains:{include:["hosted","m."]}},event:"domready"}],rules:[{name:"Send AAM Signal",trigger:[{command:"loadScript",arguments:[{sequential:true,scripts:[{src:"satellite-533e95f9d1ea0c91f6000108.js",data:[]}]}]}],scope:{subdomains:{exclude:["hosted.","m."]}},selector:"head",event:"elementexists",bubbleFireIfParent:false,bubbleFireIfChildFired:true,bubbleStop:false,eventHandlerOnElement:true},{name:"Send AAM Signal Mobile",trigger:[{command:"loadScript",arguments:[{sequential:true,scripts:[{src:"satellite-5399ff96d2fe87002d0002e9.js",data:[]}]}]}],scope:{subdomains:{include:["hosted.","m."]}},selector:"head",event:"elementexists",bubbleFireIfParent:false,bubbleFireIfChildFired:true,bubbleStop:false,eventHandlerOnElement:true},{name:"Send Search on Enter",trigger:[{command:"loadScript",arguments:[{sequential:true,scripts:[{src:"satellite-539a10b711ed93eef6000274.js",data:[]}]}]}],scope:{subdomains:{include:["hosted"]}},conditions:[function(){return _satellite.textMatch(_satellite.getVar("EnterPressed"),"true")}],selector:"#cl-search-box",event:"keypress",bubbleFireIfParent:true,bubbleFireIfChildFired:true,bubbleStop:false,eventHandlerOnElement:true}],directCallRules:[],settings:{trackInternalLinks:true,libraryName:"satelliteLib-58d41814bcd0fea11bd5420eb8a596e0f8868043",isStaging:false,allowGATTcalls:false,downloadExtensions:/\.(?:doc|docx|eps|jpg|png|svg|xls|ppt|pptx|pdf|xlsx|tab|csv|zip|txt|vsd|vxd|xml|js|css|rar|exe|wma|mov|avi|wmv|mp3|wav|m4v)($|\&|\?)/i,notifications:false,utilVisible:false,domainList:["canadianliving.com"],scriptDir:"0923d5200d1b633c4105edcc5d665bd9ec7f512d/scripts/",tagTimeout:3e3},data:{URI:n.location.pathname+n.location.search,browser:{},cartItems:[],revenue:"",host:{http:"assets.adobedtm.com",https:"assets.adobedtm.com"}},dataElements:{debugEnabled:{queryParam:"debug","default":"false",storeLength:"pageview",ignoreCase:0},EnterPressed:{customJS:function(){var t=t||e.event;if(t&&t.keyCode==13){return"true"}return"false"},storeLength:"pageview"},TC_AAM_DIL:{customJS:function(){"function"!=typeof DIL&&(DIL=function(t,r){var i=[],s,o;t!==Object(t)&&(t={});var u,a,f,l,c,h,p,d,v,m,g;u=t.partner;a=t.containerNSID;f=t.iframeAttachmentDelay;l=!!t.disableDestinationPublishingIframe;c=t.iframeAkamaiHTTPS;h=t.mappings;p=t.uuidCookie;d=!0===t.enableErrorReporting;v=t.visitorService;m=t.declaredId;g=!0===t.removeFinishedScriptsAndCallbacks;var y,b,w,E;y=!0===t.disableScriptAttachment;b=!0===t.disableDefaultRequest;w=t.afterResultForDefaultRequest;E=t.dpIframeSrc;d&&DIL.errorModule.activate();var S=!0===e._dil_unit_tests;(s=r)&&i.push(s+"");if(!u||"string"!=typeof u)return s="DIL partner is invalid or not specified in initConfig",DIL.errorModule.handleError({name:"error",message:s,filename:"dil.js"}),Error(s);s="DIL containerNSID is invalid or not specified in initConfig, setting to default of 0";if(a||"number"==typeof a)a=parseInt(a,10),!isNaN(a)&&0<=a&&(s="");s&&(a=0,i.push(s),s="");o=DIL.getDil(u,a);if(o instanceof DIL&&o.api.getPartner()==u&&o.api.getContainerNSID()==a)return o;if(this instanceof DIL)DIL.registerDil(this,u,a);else return new DIL(t,"DIL was not instantiated with the 'new' operator, returning a valid instance with partner = "+u+" and containerNSID = "+a);var x={IS_HTTPS:"https:"==n.location.protocol,POST_MESSAGE_ENABLED:!!e.postMessage,COOKIE_MAX_EXPIRATION_DATE:"Tue, 19 Jan 2038 03:14:07 UTC"},T={stuffed:{}},N={},C={firingQueue:[],fired:[],firing:!1,sent:[],errored:[],reservedKeys:{sids:!0,pdata:!0,logdata:!0,callback:!0,postCallbackFn:!0,useImageRequest:!0},callbackPrefix:"demdexRequestCallback",firstRequestHasFired:!1,useJSONP:!0,abortRequests:!1,num_of_jsonp_responses:0,num_of_jsonp_errors:0,num_of_img_responses:0,num_of_img_errors:0,toRemove:[],removed:[],readyToRemove:!1,platformParams:{d_nsid:a+"",d_rtbd:"json",d_jsonv:DIL.jsonVersion+"",d_dst:"1"},nonModStatsParams:{d_rtbd:!0,d_dst:!0,d_cts:!0,d_rs:!0},modStatsParams:null,adms:{TIME_TO_CATCH_ALL_REQUESTS_RELEASE:2e3,calledBack:!1,uuid:null,noVisitorAPI:!1,instance:null,releaseType:"no VisitorAPI",admsProcessingStarted:!1,process:function(e){try{if(!this.admsProcessingStarted){var t=this,n,r,i,s,o;if("function"==typeof e&&"function"==typeof e.getInstance){if(v===Object(v)&&(n=v.namespace)&&"string"==typeof n)r=e.getInstance(n);else{this.releaseType="no namespace";this.releaseRequests();return}if(r===Object(r)&&"function"==typeof r.isAllowed&&"function"==typeof r.getGlobalVisitorID){if(!r.isAllowed()){this.releaseType="VisitorAPI not allowed";this.releaseRequests();return}this.instance=r;this.admsProcessingStarted=!0;i=function(e){"VisitorAPI"!=t.releaseType&&(t.uuid=e,t.releaseType="VisitorAPI",t.releaseRequests())};S&&(s=v.server)&&"string"==typeof s&&(r.server=s);o=r.getGlobalVisitorID(i);if("string"==typeof o&&o.length){i(o);return}setTimeout(function(){"VisitorAPI"!=t.releaseType&&(t.releaseType="timeout",t.releaseRequests())},this.TIME_TO_CATCH_ALL_REQUESTS_RELEASE);return}this.releaseType="invalid instance"}else this.noVisitorAPI=!0;this.releaseRequests()}}catch(u){this.releaseRequests()}},releaseRequests:function(){this.calledBack=!0;C.registerRequest()},getGlobalVisitorID:function(){return this.instance?this.instance.getGlobalVisitorID():null}},declaredId:{uuid:null,declaredId:{init:null,request:null},declaredIdCombos:{},dIdAlwaysOn:!1,dIdInRequest:!1,setDeclaredId:function(e,t){var n=O.isPopulatedString,r=encodeURIComponent;if(e===Object(e)&&n(t)){var i=e.dpid,s=e.dpuuid,o=null;if(n(i)&&n(s)){o=r(i)+"$"+r(s);if(!0===this.declaredIdCombos[o])return"setDeclaredId: combo exists for type '"+t+"'";this.declaredIdCombos[o]=!0;this.declaredId[t]={dpid:i,dpuuid:s};"init"==t?this.dIdAlwaysOn=!0:"request"==t&&(this.dIdInRequest=!0);return"setDeclaredId: succeeded for type '"+t+"'"}}return"setDeclaredId: failed for type '"+t+"'"},getDeclaredIdQueryString:function(){var e=this.declaredId.request,t=this.declaredId.init,n="";null!==e?n="&d_dpid="+e.dpid+"&d_dpuuid="+e.dpuuid:null!==t&&(n="&d_dpid="+t.dpid+"&d_dpuuid="+t.dpuuid);return n},getUUIDQueryString:function(){var e=C.adms,t=O.isPopulatedString,n=!1,r=C.adms.getGlobalVisitorID();t(this.uuid)?t(r)&&this.uuid!=r&&(this.uuid=r):this.uuid=r||e.uuid;if(this.dIdAlwaysOn||this.dIdInRequest)n=!0,this.dIdInRequest=!1;return t(this.uuid)&&n?"d_uuid="+this.uuid+"&":""}},registerRequest:function(e){var t=this.firingQueue;e===Object(e)&&t.push(e);!this.firing&&t.length&&(this.adms.calledBack?(e=t.shift(),e.src=e.src.replace(/demdex.net\/event\?d_nsid=/,"demdex.net/event?"+this.declaredId.getUUIDQueryString()+"d_nsid="),A.fireRequest(e),this.firstRequestHasFired||"script"!=e.tag||(this.firstRequestHasFired=!0)):this.processVisitorAPI())},processVisitorAPI:function(){this.adms.process(e.Visitor)},requestRemoval:function(t){if(!g)return"removeFinishedScriptsAndCallbacks is not boolean true";var n=this.toRemove,r,i;t===Object(t)&&(r=t.script,i=t.callbackName,(r===Object(r)&&"SCRIPT"==r.nodeName||"no script created"==r)&&"string"==typeof i&&i.length&&n.push(t));if(this.readyToRemove&&n.length){i=n.shift();r=i.script;i=i.callbackName;"no script created"!=r?(t=r.src,r.parentNode.removeChild(r)):t=r;e[i]=null;try{delete e[i]}catch(s){}this.removed.push({scriptSrc:t,callbackName:i});DIL.variables.scriptsRemoved.push(t);DIL.variables.callbacksRemoved.push(i);return this.requestRemoval()}return"requestRemoval() processed"}};o=function(){var e="http://fast.",t="?d_nsid="+a+"#"+encodeURIComponent(n.location.href);if("string"===typeof E&&E.length)return E+t;x.IS_HTTPS&&(e=!0===c?"https://fast.":"https://");return e+u+".demdex.net/dest4.html"+t};var k={THROTTLE_START:3e4,throttleTimerSet:!1,id:"destination_publishing_iframe_"+u+"_"+a,url:o(),iframe:null,iframeHasLoaded:!1,sendingMessages:!1,messages:[],messagesPosted:[],messageSendingInterval:x.POST_MESSAGE_ENABLED?15:100,jsonProcessed:[],attachIframe:function(){var e=this,t=n.createElement("iframe");t.id=this.id;t.style.cssText="display: none; width: 0; height: 0;";t.src=this.url;M.addListener(t,"load",function(){e.iframeHasLoaded=!0;e.requestToProcess()});n.body.appendChild(t);this.iframe=t},requestToProcess:function(e,t){var n=this;e&&!O.isEmptyObject(e)&&this.process(e,t);this.iframeHasLoaded&&this.messages.length&&!this.sendingMessages&&(this.throttleTimerSet||(this.throttleTimerSet=!0,setTimeout(function(){n.messageSendingInterval=x.POST_MESSAGE_ENABLED?15:150},this.THROTTLE_START)),this.sendingMessages=!0,this.sendMessages())},process:function(e,t){var n=encodeURIComponent,r,i,s,o,u,a;t===Object(t)&&(a=M.encodeAndBuildRequest([C.declaredId.uuid||"",t.dpid||"",t.dpuuid||""],","));if((r=e.dests)&&r instanceof Array&&(i=r.length))for(s=0;s<i;s++)o=r[s],o=[n("dests"),n(o.id||""),n(o.y||""),n(o.c||"")],this.addMessage(o.join("|"));if((r=e.ibs)&&r instanceof Array&&(i=r.length))for(s=0;s<i;s++)o=r[s],o=[n("ibs"),n(o.id||""),n(o.tag||""),M.encodeAndBuildRequest(o.url||[],","),n(o.ttl||""),"",a],this.addMessage(o.join("|"));if((r=e.dpcalls)&&r instanceof Array&&(i=r.length))for(s=0;s<i;s++)o=r[s],u=o.callback||{},u=[u.obj||"",u.fn||"",u.key||"",u.tag||"",u.url||""],o=[n("dpm"),n(o.id||""),n(o.tag||""),M.encodeAndBuildRequest(o.url||[],","),n(o.ttl||""),M.encodeAndBuildRequest(u,","),a],this.addMessage(o.join("|"));this.jsonProcessed.push(e)},addMessage:function(e){var t=encodeURIComponent,t=d?t("---destpub-debug---"):t("---destpub---");this.messages.push(t+e)},sendMessages:function(){var e=this,t;this.messages.length?(t=this.messages.shift(),DIL.xd.postMessage(t,this.url,this.iframe.contentWindow),this.messagesPosted.push(t),setTimeout(function(){e.sendMessages()},this.messageSendingInterval)):this.sendingMessages=!1}},L={traits:function(e){O.isValidPdata(e)&&(N.sids instanceof Array||(N.sids=[]),M.extendArray(N.sids,e));return this},pixels:function(e){O.isValidPdata(e)&&(N.pdata instanceof Array||(N.pdata=[]),M.extendArray(N.pdata,e));return this},logs:function(e){O.isValidLogdata(e)&&(N.logdata!==Object(N.logdata)&&(N.logdata={}),M.extendObject(N.logdata,e));return this},customQueryParams:function(e){O.isEmptyObject(e)||M.extendObject(N,e,C.reservedKeys);return this},signals:function(e,t){var n,r=e;if(!O.isEmptyObject(r)){if(t&&"string"==typeof t)for(n in r={},e)e.hasOwnProperty(n)&&(r[t+n]=e[n]);M.extendObject(N,r,C.reservedKeys)}return this},declaredId:function(e){C.declaredId.setDeclaredId(e,"request");return this},result:function(e){"function"==typeof e&&(N.callback=e);return this},afterResult:function(e){"function"==typeof e&&(N.postCallbackFn=e);return this},useImageRequest:function(){N.useImageRequest=!0;return this},clearData:function(){N={};return this},submit:function(){A.submitRequest(N);N={};return this},getPartner:function(){return u},getContainerNSID:function(){return a},getEventLog:function(){return i},getState:function(){var e={},t={};M.extendObject(e,C,{callbackPrefix:!0,useJSONP:!0,registerRequest:!0});M.extendObject(t,k,{attachIframe:!0,requestToProcess:!0,process:!0,sendMessages:!0});return{pendingRequest:N,otherRequestInfo:e,destinationPublishingInfo:t}},idSync:function(e){if(e!==Object(e)||"string"!=typeof e.dpid||!e.dpid.length)return"Error: config or config.dpid is empty";if("string"!=typeof e.url||!e.url.length)return"Error: config.url is empty";var t=e.url,n=e.minutesToLive,r=encodeURIComponent,i=C.declaredId,t=t.replace(/^https:/,"").replace(/^http:/,"");if("undefined"==typeof n)n=20160;else if(n=parseInt(n,10),isNaN(n)||0>=n)return"Error: config.minutesToLive needs to be a positive number";i=M.encodeAndBuildRequest([C.adms.getGlobalVisitorID()||i.uuid||"",e.dpid,e.dpuuid||""],",");e=["ibs",r(e.dpid),"img",r(t),n,"",i];k.addMessage(e.join("|"));C.firstRequestHasFired&&k.requestToProcess();return"Successfully queued"},aamIdSync:function(e){if(e!==Object(e)||"string"!=typeof e.dpuuid||!e.dpuuid.length)return"Error: config or config.dpuuid is empty";e.url="//dpm.demdex.net/ibs:dpid="+e.dpid+"&dpuuid="+e.dpuuid;return this.idSync(e)},passData:function(e){if(O.isEmptyObject(e))return"Error: json is empty or not an object";A.defaultCallback(e);return"json submitted for processing"},getPlatformParams:function(){return C.platformParams},getEventCallConfigParams:function(){var e=C,t=e.modStatsParams,n=e.platformParams,r;if(!t){t={};for(r in n)n.hasOwnProperty(r)&&!e.nonModStatsParams[r]&&(t[r.replace(/^d_/,"")]=n[r]);e.modStatsParams=t}return t}},A={submitRequest:function(e){C.registerRequest(A.createQueuedRequest(e));return!0},createQueuedRequest:function(e){var t=C,n,r=e.callback,i="img";if(!O.isEmptyObject(h)){var s,o,f;for(s in h)h.hasOwnProperty(s)&&(o=h[s],null!=o&&""!==o&&s in e&&!(o in e||o in C.reservedKeys)&&(f=e[s],null!=f&&""!==f&&(e[o]=f)))}O.isValidPdata(e.sids)||(e.sids=[]);O.isValidPdata(e.pdata)||(e.pdata=[]);O.isValidLogdata(e.logdata)||(e.logdata={});e.logdataArray=M.convertObjectToKeyValuePairs(e.logdata,"=",!0);e.logdataArray.push("_ts="+(new Date).getTime());"function"!=typeof r&&(r=this.defaultCallback);if(t.useJSONP=!e.useImageRequest||"boolean"!=typeof e.useImageRequest)i="script",n=t.callbackPrefix+"_"+u+"_"+a+"_"+(new Date).getTime();return{tag:i,src:A.makeRequestSrc(e,n),internalCallbackName:n,callbackFn:r,postCallbackFn:e.postCallbackFn,useImageRequest:e.useImageRequest,requestData:e}},defaultCallback:function(e,t){var r,i,s,o,u,a,f,c,h;if((r=e.stuff)&&r instanceof Array&&(i=r.length))for(s=0;s<i;s++)if((o=r[s])&&o===Object(o)){u=o.cn;a=o.cv;f=o.ttl;if("undefined"==typeof f||""===f)f=Math.floor(M.getMaxCookieExpiresInMinutes()/60/24);c=o.dmn||"."+n.domain.replace(/^www\./,"");h=o.type;u&&(a||"number"==typeof a)&&("var"!=h&&(f=parseInt(f,10))&&!isNaN(f)&&M.setCookie(u,a,1440*f,"/",c,!1),T.stuffed[u]=a)}r=e.uuid;i=C.declaredId;s=O.isPopulatedString;s(r)&&(s(i.uuid)||(i.uuid=r),O.isEmptyObject(p)||(i=p.path,"string"==typeof i&&i.length||(i="/"),s=parseInt(p.days,10),isNaN(s)&&(s=100),M.setCookie(p.name||"aam_did",r,1440*s,i,p.domain||"."+n.domain.replace(/^www\./,""),!0===p.secure)));l||C.abortRequests||k.requestToProcess(e,t)},makeRequestSrc:function(e,t){e.sids=O.removeEmptyArrayValues(e.sids||[]);e.pdata=O.removeEmptyArrayValues(e.pdata||[]);var n=C,r=n.platformParams,i=M.encodeAndBuildRequest(e.sids,","),s=M.encodeAndBuildRequest(e.pdata,","),o=(e.logdataArray||[]).join("&");delete e.logdataArray;var a=x.IS_HTTPS?"https://":"http://",f=n.declaredId.getDeclaredIdQueryString(),l;l=[];var c,h,p,d;for(c in e)if(!(c in n.reservedKeys)&&e.hasOwnProperty(c))if(h=e[c],c=encodeURIComponent(c),h instanceof Array)for(p=0,d=h.length;p<d;p++)l.push(c+"="+encodeURIComponent(h[p]));else l.push(c+"="+encodeURIComponent(h));l=l.length?"&"+l.join("&"):"";return a+u+".demdex.net/event?d_nsid="+r.d_nsid+f+(i.length?"&d_sid="+i:"")+(s.length?"&d_px="+s:"")+(o.length?"&d_ld="+encodeURIComponent(o):"")+l+(n.useJSONP?"&d_rtbd="+r.d_rtbd+"&d_jsonv="+r.d_jsonv+"&d_dst="+r.d_dst+"&d_cb="+(t||""):"")},fireRequest:function(e){if("img"==e.tag)this.fireImage(e);else if("script"==e.tag){var t=C.declaredId,t=t.declaredId.request||t.declaredId.init||{};this.fireScript(e,{dpid:t.dpid||"",dpuuid:t.dpuuid||""})}},fireImage:function(e){var t=C,n,r;t.abortRequests||(t.firing=!0,n=new Image(0,0),t.sent.push(e),n.onload=function(){t.firing=!1;t.fired.push(e);t.num_of_img_responses++;t.registerRequest()},r=function(n){s="imgAbortOrErrorHandler received the event of type "+n.type;i.push(s);t.abortRequests=!0;t.firing=!1;t.errored.push(e);t.num_of_img_errors++;t.registerRequest()},n.addEventListener?(n.addEventListener("error",r,!1),n.addEventListener("abort",r,!1)):n.attachEvent&&(n.attachEvent("onerror",r),n.attachEvent("onabort",r)),n.src=e.src)},fireScript:function(t,r){var o=this,a=C,f,l,c=t.src,h=t.postCallbackFn,p="function"==typeof h,d=t.internalCallbackName;a.abortRequests||(a.firing=!0,e[d]=function(e){try{e!==Object(e)&&(e={});var n=t.callbackFn;a.firing=!1;a.fired.push(t);a.num_of_jsonp_responses++;n(e,r);p&&h(e,r)}catch(o){o.message="DIL jsonp callback caught error with message "+o.message;s=o.message;i.push(s);o.filename=o.filename||"dil.js";o.partner=u;DIL.errorModule.handleError(o);try{n({error:o.name+"|"+o.message}),p&&h({error:o.name+"|"+o.message})}catch(f){}}finally{a.requestRemoval({script:l,callbackName:d}),a.registerRequest()}},y?(a.firing=!1,a.requestRemoval({script:"no script created",callbackName:d})):(l=n.createElement("script"),l.addEventListener&&l.addEventListener("error",function(e){a.requestRemoval({script:l,callbackName:d});s="jsonp script tag error listener received the event of type "+e.type+" with src "+c;o.handleScriptError(s,t)},!1),l.type="text/javascript",l.src=c,f=DIL.variables.scriptNodeList[0],f.parentNode.insertBefore(l,f)),a.sent.push(t),a.declaredId.declaredId.request=null)},handleScriptError:function(e,t){var n=C;i.push(e);n.abortRequests=!0;n.firing=!1;n.errored.push(t);n.num_of_jsonp_errors++;n.registerRequest()}},O={isValidPdata:function(e){return e instanceof Array&&this.removeEmptyArrayValues(e).length?!0:!1},isValidLogdata:function(e){return!this.isEmptyObject(e)},isEmptyObject:function(e){if(e!==Object(e))return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},removeEmptyArrayValues:function(e){for(var t=0,n=e.length,r,i=[],t=0;t<n;t++)r=e[t],"undefined"!=typeof r&&null!=r&&i.push(r);return i},isPopulatedString:function(e){return"string"==typeof e&&e.length}},M={addListener:function(){if(n.addEventListener)return function(e,t,n){e.addEventListener(t,function(e){"function"==typeof n&&n(e)},!1)};if(n.attachEvent)return function(e,t,n){e.attachEvent("on"+t,function(e){"function"==typeof n&&n(e)})}}(),convertObjectToKeyValuePairs:function(e,t,n){var r=[];t=t||"=";var i,s;for(i in e)s=e[i],"undefined"!=typeof s&&null!=s&&r.push(i+t+(n?encodeURIComponent(s):s));return r},encodeAndBuildRequest:function(e,t){return this.map(e,function(e){return encodeURIComponent(e)}).join(t)},map:function(e,t){if(Array.prototype.map)return e.map(t);if(void 0===e||null===e)throw new TypeError;var n=Object(e),r=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var i=Array(r),s=0;s<r;s++)s in n&&(i[s]=t.call(t,n[s],s,n));return i},filter:function(e,t){if(!Array.prototype.filter){if(void 0===e||null===e)throw new TypeError;var n=Object(e),r=n.length>>>0;if("function"!==typeof t)throw new TypeError;for(var i=[],s=0;s<r;s++)if(s in n){var o=n[s];t.call(t,o,s,n)&&i.push(o)}return i}return e.filter(t)},getCookie:function(e){e+="=";var t=n.cookie.split(";"),r,i,s;r=0;for(i=t.length;r<i;r++){for(s=t[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(e))return decodeURIComponent(s.substring(e.length,s.length))}return null},setCookie:function(e,t,r,i,s,o){var u=new Date;r&&(r*=6e4);n.cookie=e+"="+encodeURIComponent(t)+(r?";expires="+(new Date(u.getTime()+r)).toUTCString():"")+(i?";path="+i:"")+(s?";domain="+s:"")+(o?";secure":"")},extendArray:function(e,t){return e instanceof Array&&t instanceof Array?(Array.prototype.push.apply(e,t),!0):!1},extendObject:function(e,t,n){var r;if(e===Object(e)&&t===Object(t)){for(r in t)!t.hasOwnProperty(r)||!O.isEmptyObject(n)&&r in n||(e[r]=t[r]);return!0}return!1},getMaxCookieExpiresInMinutes:function(){return((new Date(x.COOKIE_MAX_EXPIRATION_DATE)).getTime()-(new Date).getTime())/1e3/60}};"error"==u&&0==a&&M.addListener(e,"load",function(){DIL.windowLoaded=!0});var _=function(){D();l||C.abortRequests||k.attachIframe();C.readyToRemove=!0;C.requestRemoval()},D=function(){l||setTimeout(function(){b||C.firstRequestHasFired||C.adms.admsProcessingStarted||C.adms.calledBack||("function"==typeof w?L.afterResult(w).submit():L.submit())},DIL.constants.TIME_TO_DEFAULT_REQUEST)},P=n;"error"!=u&&(DIL.windowLoaded?_():"complete"!=P.readyState&&"loaded"!=P.readyState?M.addListener(e,"load",_):DIL.isAddedPostWindowLoadWasCalled?M.addListener(e,"load",_):(f="number"==typeof f?parseInt(f,10):0,0>f&&(f=0),setTimeout(_,f||DIL.constants.TIME_TO_CATCH_ALL_DP_IFRAME_ATTACHMENT)));C.declaredId.setDeclaredId(m,"init");this.api=L;this.getStuffedVariable=function(e){var t=T.stuffed[e];t||"number"==typeof t||(t=M.getCookie(e))||"number"==typeof t||(t="");return t};this.validators=O;this.helpers=M;this.constants=x;this.log=i;S&&(this.pendingRequest=N,this.requestController=C,this.setDestinationPublishingUrl=o,this.destinationPublishing=k,this.requestProcs=A,this.variables=T)},function(){var e=n,t;null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",t=function(){e.removeEventListener("DOMContentLoaded",t,!1);e.readyState="complete"},!1))}(),DIL.extendStaticPropertiesAndMethods=function(e){var t;if(e===Object(e))for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])},DIL.extendStaticPropertiesAndMethods({version:"4.8",jsonVersion:1,constants:{TIME_TO_DEFAULT_REQUEST:50,TIME_TO_CATCH_ALL_DP_IFRAME_ATTACHMENT:500},variables:{scriptNodeList:n.getElementsByTagName("script"),scriptsRemoved:[],callbacksRemoved:[]},windowLoaded:!1,dils:{},isAddedPostWindowLoadWasCalled:!1,isAddedPostWindowLoad:function(e){this.isAddedPostWindowLoadWasCalled=!0;this.windowLoaded="function"==typeof e?!!e():"boolean"==typeof e?e:!0},create:function(e){try{return new DIL(e)}catch(t){return(new Image(0,0)).src="http://error.demdex.net/event?d_nsid=0&d_px=14137&d_ld=name%3Derror%26filename%3Ddil.js%26partner%3Dno_partner%26message%3DError%2520in%2520attempt%2520to%2520create%2520DIL%2520instance%2520with%2520DIL.create()%26_ts%3D"+(new Date).getTime(),Error("Error in attempt to create DIL instance with DIL.create()")}},registerDil:function(e,t,n){t=t+"$"+n;t in this.dils||(this.dils[t]=e)},getDil:function(e,t){var n;"string"!=typeof e&&(e="");t||(t=0);n=e+"$"+t;return n in this.dils?this.dils[n]:Error("The DIL instance with partner = "+e+" and containerNSID = "+t+" was not found")},dexGetQSVars:function(e,t,n){t=this.getDil(t,n);return t instanceof this?t.getStuffedVariable(e):""},xd:{postMessage:function(t,n,r){var i=1;n&&(e.postMessage?r.postMessage(t,n.replace(/([^:]+:\/\/[^\/]+).*/,"$1")):n&&(r.location=n.replace(/#.*$/,"")+"#"+ +(new Date)+i++ +"&"+t))}}}),DIL.errorModule=function(){var e=DIL.create({partner:"error",containerNSID:0,disableDestinationPublishingIframe:!0}),t={harvestererror:14138,destpuberror:14139,dpmerror:14140,generalerror:14137,error:14137,noerrortypedefined:15021,evalerror:15016,rangeerror:15017,referenceerror:15018,typeerror:15019,urierror:15020},r=!1;return{activate:function(){r=!0},handleError:function(i){if(!r)return"DIL error module has not been activated";i!==Object(i)&&(i={});var s=i.name?(new String(i.name)).toLowerCase():"",o=[];i={name:s,filename:i.filename?i.filename+"":"",partner:i.partner?i.partner+"":"no_partner",site:i.site?i.site+"":n.location.href,message:i.message?i.message+"":""};o.push(s in t?t[s]:t.noerrortypedefined);e.api.pixels(o).logs(i).useImageRequest().submit();return"DIL error report sent"},pixelMap:t}}(),DIL.tools={},DIL.modules={helpers:{handleModuleError:function(e,t,n){var r="";t=t||"Error caught in DIL module/submodule: ";e===Object(e)?r=t+(e.message||"err has no message"):(r=t+"err is not a valid object",e={});e.message=r;n instanceof DIL&&(e.partner=n.api.getPartner());DIL.errorModule.handleError(e);return this.errorMessage=r}}});DIL.tools.getSearchReferrer=function(e,t){var r=DIL.getDil("error"),i=DIL.tools.decomposeURI(e||n.referrer),s="",o="",u={queryParam:"q"};return(s=r.helpers.filter([t===Object(t)?t:{},{hostPattern:/aol\./},{hostPattern:/ask\./},{hostPattern:/bing\./},{hostPattern:/google\./},{hostPattern:/yahoo\./,queryParam:"p"}],function(e){return!(!e.hasOwnProperty("hostPattern")||!i.hostname.match(e.hostPattern))}).shift())?{valid:!0,name:i.hostname,keywords:(r.helpers.extendObject(u,s),o=u.queryPattern?(s=(""+i.search).match(u.queryPattern))?s[1]:"":i.uriParams[u.queryParam],decodeURIComponent(o||"").replace(/\+|%20/g," "))}:{valid:!1,name:"",keywords:""}};DIL.tools.decomposeURI=function(e){var t=DIL.getDil("error"),r=n.createElement("a");r.href=e||n.referrer;return{hash:r.hash,host:r.host.split(":").shift(),hostname:r.hostname,href:r.href,pathname:r.pathname.replace(/^\//,""),protocol:r.protocol,search:r.search,uriParams:function(e,n){t.helpers.map(n.split("&"),function(t){t=t.split("=");e[t.shift()]=t.shift()});return e}({},r.search.replace(/^(\/|\?)?|\/$/g,""))}};DIL.tools.getMetaTags=function(){var e={},t=n.getElementsByTagName("meta"),r,i,s,o,u;r=0;for(s=arguments.length;r<s;r++)if(o=arguments[r],null!==o)for(i=0;i<t.length;i++)if(u=t[i],u.name==o){e[o]=u.content;break}return e};DIL.modules.siteCatalyst={dil:null,handle:DIL.modules.helpers.handleModuleError,init:function(t,n,r){try{var i=this,s={name:"DIL Site Catalyst Module Error"},o=function(e){s.message=e;DIL.errorModule.handleError(s);return e};this.dil=null;if(n instanceof DIL)this.dil=n;else return o("dilInstance is not a valid instance of DIL");s.partner=n.api.getPartner();if(t!==Object(t))return o("siteCatalystReportingSuite is not an object");e.AppMeasurement_Module_DIL=t.m_DIL=function(e){var t="function"===typeof e.m_i?e.m_i("DIL"):this;if(t!==Object(t))return o("m is not an object");t.trackVars=i.constructTrackVars(r);t.d=0;t.s=e;t._t=function(){var e,t,n=","+this.trackVars+",",r=this.s,i,s=[];i=[];var u={},a=!1;if(r!==Object(r))return o("Error in m._t function: s is not an object");if(this.d){if("function"==typeof r.foreachVar)r.foreachVar(function(e,t){u[e]=t;a=!0},this.trackVars);else{if(!(r.va_t instanceof Array))return o("Error in m._t function: s.va_t is not an array");if(r.lightProfileID)(e=r.lightTrackVars)&&(e=","+e+","+r.vl_mr+",");else if(r.pe||r.linkType)e=r.linkTrackVars,r.pe&&(t=r.pe.substring(0,1).toUpperCase()+r.pe.substring(1),r[t]&&(e=r[t].trackVars)),e&&(e=","+e+","+r.vl_l+","+r.vl_l2+",");if(e){t=0;for(s=e.split(",");t<s.length;t++)0<=n.indexOf(","+s[t]+",")&&i.push(s[t]);i.length&&(n=","+i.join(",")+",")}i=0;for(t=r.va_t.length;i<t;i++)e=r.va_t[i],0<=n.indexOf(","+e+",")&&null!=r[e]&&""!==r[e]&&(u[e]=r[e],a=!0)}a&&this.d.api.signals(u,"c_").submit()}}};t.loadModule("DIL");t.DIL.d=n;return s.message?s.message:"DIL.modules.siteCatalyst.init() completed with no errors"}catch(u){return this.handle(u,"DIL.modules.siteCatalyst.init() caught error with message ",this.dil)}},constructTrackVars:function(e){var t=[],n,r,i,s,o;if(e===Object(e)){n=e.names;if(n instanceof Array&&(i=n.length))for(r=0;r<i;r++)s=n[r],"string"==typeof s&&s.length&&t.push(s);e=e.iteratedNames;if(e instanceof Array&&(i=e.length))for(r=0;r<i;r++)if(n=e[r],n===Object(n)&&(s=n.name,o=parseInt(n.maxIndex,10),"string"==typeof s&&s.length&&!isNaN(o)&&0<=o))for(n=0;n<=o;n++)t.push(s+n);if(t.length)return t.join(",")}return this.constructTrackVars({names:"pageName channel campaign products events pe pev1 pev2 pev3".split(" "),iteratedNames:[{name:"prop",maxIndex:75},{name:"eVar",maxIndex:75}]})}};DIL.modules.GA={dil:null,arr:null,tv:null,errorMessage:"",defaultTrackVars:["_setAccount","_setCustomVar","_addItem","_addTrans","_trackSocial"],defaultTrackVarsObj:null,signals:{},hasSignals:!1,handle:DIL.modules.helpers.handleModuleError,init:function(e,t,n){try{this.tv=this.arr=this.dil=null;this.errorMessage="";this.signals={};this.hasSignals=!1;var r={name:"DIL GA Module Error"},i="";t instanceof DIL?(this.dil=t,r.partner=this.dil.api.getPartner()):(i="dilInstance is not a valid instance of DIL",r.message=i,DIL.errorModule.handleError(r));e instanceof Array&&e.length?this.arr=e:(i="gaArray is not an array or is empty",r.message=i,DIL.errorModule.handleError(r));this.tv=this.constructTrackVars(n);this.errorMessage=i}catch(s){this.handle(s,"DIL.modules.GA.init() caught error with message ",this.dil)}finally{return this}},constructTrackVars:function(e){var t=[],n,r,i,s;if(this.defaultTrackVarsObj!==Object(this.defaultTrackVarsObj)){i=this.defaultTrackVars;s={};n=0;for(r=i.length;n<r;n++)s[i[n]]=!0;this.defaultTrackVarsObj=s}else s=this.defaultTrackVarsObj;if(e===Object(e)){e=e.names;if(e instanceof Array&&(r=e.length))for(n=0;n<r;n++)i=e[n],"string"==typeof i&&i.length&&i in s&&t.push(i);if(t.length)return t}return this.defaultTrackVars},constructGAObj:function(e){var t={};e=e instanceof Array?e:this.arr;var n,r,i,s;n=0;for(r=e.length;n<r;n++)i=e[n],i instanceof Array&&i.length&&(i=[],s=e[n],i instanceof Array&&s instanceof Array&&Array.prototype.push.apply(i,s),s=i.shift(),"string"==typeof s&&s.length&&(t[s]instanceof Array||(t[s]=[]),t[s].push(i)));return t},addToSignals:function(e,t){if("string"!=typeof e||""===e||null==t||""===t)return!1;this.signals[e]instanceof Array||(this.signals[e]=[]);this.signals[e].push(t);return this.hasSignals=!0},constructSignals:function(){var e=this.constructGAObj(),t={_setAccount:function(e){this.addToSignals("c_accountId",e)},_setCustomVar:function(e,t,n,r){"string"==typeof t&&t.length&&this.addToSignals("c_"+t,n)},_addItem:function(e,t,n,r,i,s){this.addToSignals("c_itemOrderId",e);this.addToSignals("c_itemSku",t);this.addToSignals("c_itemName",n);this.addToSignals("c_itemCategory",r);this.addToSignals("c_itemPrice",i);this.addToSignals("c_itemQuantity",s)},_addTrans:function(e,t,n,r,i,s,o,u){this.addToSignals("c_transOrderId",e);this.addToSignals("c_transAffiliation",t);this.addToSignals("c_transTotal",n);this.addToSignals("c_transTax",r);this.addToSignals("c_transShipping",i);this.addToSignals("c_transCity",s);this.addToSignals("c_transState",o);this.addToSignals("c_transCountry",u)},_trackSocial:function(e,t,n,r){this.addToSignals("c_socialNetwork",e);this.addToSignals("c_socialAction",t);this.addToSignals("c_socialTarget",n);this.addToSignals("c_socialPagePath",r)}},n=this.tv,r,i,s,o,u,a;r=0;for(i=n.length;r<i;r++)if(s=n[r],e.hasOwnProperty(s)&&t.hasOwnProperty(s)&&(a=e[s],a instanceof Array))for(o=0,u=a.length;o<u;o++)t[s].apply(this,a[o])},submit:function(){try{if(""!==this.errorMessage)return this.errorMessage;this.constructSignals();return this.hasSignals?(this.dil.api.signals(this.signals).submit(),"Signals sent: "+this.dil.helpers.convertObjectToKeyValuePairs(this.signals,"=",!0)+this.dil.log):"No signals present"}catch(e){return this.handle(e,"DIL.modules.GA.submit() caught error with message ",this.dil)}},Stuffer:{LIMIT:5,dil:null,cookieName:null,delimiter:null,errorMessage:"",handle:DIL.modules.helpers.handleModuleError,callback:null,v:function(){return!1},init:function(e,t,n){try{this.callback=this.dil=null,this.errorMessage="",e instanceof DIL?(this.dil=e,this.v=this.dil.validators.isPopulatedString,this.cookieName=this.v(t)?t:"aam_ga",this.delimiter=this.v(n)?n:"|"):this.handle({message:"dilInstance is not a valid instance of DIL"},"DIL.modules.GA.Stuffer.init() error: ")}catch(r){this.handle(r,"DIL.modules.GA.Stuffer.init() caught error with message ",this.dil)}finally{return this}},process:function(t){var n,r,i,s,o,u;u=!1;var a=1;if(t===Object(t)&&(n=t.stuff)&&n instanceof Array&&(r=n.length))for(t=0;t<r;t++)if((i=n[t])&&i===Object(i)&&(s=i.cn,o=i.cv,s==this.cookieName&&this.v(o))){u=!0;break}if(u){n=o.split(this.delimiter);"undefined"==typeof e._gaq&&(e._gaq=[]);i=e._gaq;t=0;for(r=n.length;t<r&&!(u=n[t].split("="),o=u[0],u=u[1],this.v(o)&&this.v(u)&&i.push(["_setCustomVar",a++,o,u,1]),a>this.LIMIT);t++);this.errorMessage=1<a?"No errors - stuffing successful":"No valid values to stuff"}else this.errorMessage="Cookie name and value not found in json";if("function"==typeof this.callback)return this.callback()},submit:function(){try{var e=this;if(""!==this.errorMessage)return this.errorMessage;this.dil.api.afterResult(function(t){e.process(t)}).submit();return"DIL.modules.GA.Stuffer.submit() successful"}catch(t){return this.handle(t,"DIL.modules.GA.Stuffer.submit() caught error with message ",this.dil)}}}};DIL.modules.Peer39={aid:"",dil:null,optionals:null,errorMessage:"",calledBack:!1,script:null,scriptsSent:[],returnedData:[],handle:DIL.modules.helpers.handleModuleError,init:function(e,t,r){try{this.dil=null;this.errorMessage="";this.calledBack=!1;this.optionals=r===Object(r)?r:{};r={name:"DIL Peer39 Module Error"};var i=[],s="";this.isSecurePageButNotEnabled(n.location.protocol)&&(s="Module has not been enabled for a secure page",i.push(s),r.message=s,DIL.errorModule.handleError(r));t instanceof DIL?(this.dil=t,r.partner=this.dil.api.getPartner()):(s="dilInstance is not a valid instance of DIL",i.push(s),r.message=s,DIL.errorModule.handleError(r));"string"==typeof e&&e.length?this.aid=e:(s="aid is not a string or is empty",i.push(s),r.message=s,DIL.errorModule.handleError(r));this.errorMessage=i.join("\n")}catch(o){this.handle(o,"DIL.modules.Peer39.init() caught error with message ",this.dil)}finally{return this}},isSecurePageButNotEnabled:function(e){return"https:"==e&&!0!==this.optionals.enableHTTPS?!0:!1},constructSignals:function(){var t=this,n=this.constructScript(),r=DIL.variables.scriptNodeList[0];e["afterFinished_"+this.aid]=function(){try{var e=t.processData(p39_KVP_Short("c_p","|").split("|"));e.hasSignals&&t.dil.api.signals(e.signals).submit()}catch(n){}finally{t.calledBack=!0,"function"==typeof t.optionals.afterResult&&t.optionals.afterResult()}};r.parentNode.insertBefore(n,r);this.scriptsSent.push(n);return"Request sent to Peer39"},processData:function(e){var t,n,r,i,s={},o=!1;this.returnedData.push(e);if(e instanceof Array)for(t=0,n=e.length;t<n;t++)r=e[t].split("="),i=r[0],r=r[1],i&&isFinite(r)&&!isNaN(parseInt(r,10))&&(s[i]instanceof Array||(s[i]=[]),s[i].push(r),o=!0);return{hasSignals:o,signals:s}},constructScript:function(){var e=n.createElement("script"),t=this.optionals,r=t.scriptId,i=t.scriptSrc,t=t.scriptParams;e.id="string"==typeof r&&r.length?r:"peer39ScriptLoader";e.type="text/javascript";"string"==typeof i&&i.length?e.src=i:(e.src=(this.dil.constants.IS_HTTPS?"https:":"http:")+"//stags.peer39.net/"+this.aid+"/trg_"+this.aid+".js","string"==typeof t&&t.length&&(e.src+="?"+t));return e},submit:function(){try{return""!==this.errorMessage?this.errorMessage:this.constructSignals()}catch(e){return this.handle(e,"DIL.modules.Peer39.submit() caught error with message ",this.dil)}}};var t=DIL.create({partner:"tcmedia",uuidCookie:{name:"aam_uuid",days:30}});try{var r=_satellite.getVar("debugEnabled")!=="false"||e.localStorage.sdsat_debug=="true";if(TC_AAM!=null){if(r){console.log("<<<<<<<<<<<< Sending signal to AAM >>>>>>>>>>>>")}t.api.signals(TC_AAM,"c_").submit()}else if(r){console.log("***** No TC_AAM Object found on the page ********")}}catch(i){console.error(i)}},storeLength:"pageview"},TC_AAM_DISCARD_PREFIX:{customJS:function(){return"discard_"},storeLength:"session"},TC_AAM_META_PROPERTY_MAPPING:{customJS:function(){var e=e||{"tcaam.article.type":"contentType","tcaam.course.meal.type":"mealType","tcaam.preparation.method":"preparationMethod","tcaam.main.ingredient":"mainIngredient","tcaam.specific.criteria":"specificCriteria","tcaam.dietary.criteria":"dietaryCriteria","tcaam.cuisine.type":"cuisineType","tcaam.holiday.and.special.events":"specialEvents","tcaam.drinks":"drinks","tcaam.subject.key":"subject","tcaam.food":"food","tcaam.event":"event","tcaam.general.category":"generalCategory"};return e},storeLength:"pageview"},TC_AAM_PRODUCTION_HOSTS:{customJS:function(){return["canadianliving.com","www.canadianliving.com","video.canadianliving.com"]},storeLength:"session"},TC_AAM_PRODUCTION_HOSTS_MOBILE:{customJS:function(){return["m.canadianliving.com","www.m.canadianliving.com"]},storeLength:"session"},TC_AAM_SEARCH_CONFIG:{customJS:function(){return{searchPathDiscriminators:["search_recipe.php","search_all.php","search_advanced.php","search.php"],searchType:"QUERY_STRING",searchParameters:["search_context_keywords","search_fulltext"]}},storeLength:"pageview"}},buildDate:"2014-09-24 15:04:54 UTC",publishDate:"2014-09-24 15:04:19 UTC"})})(window,document)