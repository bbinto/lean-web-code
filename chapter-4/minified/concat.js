!function(){var secure=0===window.location.protocol.indexOf("https"),config={kitId:secure?"snb1ove":"zam5nzz",host:secure?"//use.typekit.net/":"//typeface.nytimes.com/",scriptTimeout:3e3},h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," "),h.className+=" wf-inactive"},config.scriptTimeout),tk=document.createElement("script"),d=!1;tk.src=config.host+config.kitId+".js",tk.type="text/javascript",tk.async="true",tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(!(d||a&&"complete"!=a&&"loaded"!=a)){d=!0,clearTimeout(t);try{Typekit.load(config)}catch(b){}}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)}(),window.NYTABTEST={},window.NYTABTEST.config=function(){"use strict";var i,configs,tests=[],configDOMElement=document.getElementById("abtestconfig");if(configDOMElement)try{configs=JSON.parse(configDOMElement.innerHTML)}catch(e){configs=[],window.NYTABTEST.configDOMElement=null}else configs=[],window.NYTABTEST.configDOMElement=null;var Test=function(config){var prop;for(prop in config)config.hasOwnProperty(prop)&&(this[prop]=config[prop])};for(Test.prototype={STATUS:{waiting:"-3",excluded:"-2",throttle:"-1",control:"0",variantA:"1",variantB:"2",variantC:"3"},userStatus:"-3",getTestId:function(){return this.testId},getTestName:function(){return this.testName},getThrottle:function(){return this.throttle},getAllocation:function(){return this.allocation},getUserStatus:function(){return this.userStatus},isUserThrottle:function(){return parseInt(this.userStatus,10)===parseInt(this.STATUS.throttle,10)},isUserVariant:function(){return parseInt(this.userStatus,10)>=parseInt(this.STATUS.throttle,10)?this.userStatus:""},isUserControl:function(){return parseInt(this.userStatus,10)===parseInt(this.STATUS.control,10)},getRandomNumber:function(){return Math.random()},determineVariant:function(){var min=1,max=this.variants;this.userStatus=Math.floor(Math.random()*(max-min+1)+min).toString()},determine:function(force){"undefined"!=typeof force?this.userStatus=force:this.userStatus===this.STATUS.waiting?this.getRandomNumber()<=this.throttle?(this.userStatus=this.STATUS.throttle,this.determine()):this.userStatus=this.STATUS.excluded:this.userStatus===this.STATUS.throttle&&(this.getRandomNumber()<=this.allocation?this.determineVariant():this.userStatus=this.STATUS.control)}},NYTABTEST.TestConstructor=Test,i=0;i<configs.length;i+=1)configs[i].testId.length>0&&tests.push(new Test(configs[i]));return tests}(),window.NYTABTEST.engine=function(){"use strict";var engine,tests=window.NYTABTEST.config,cookieName="NYT-wpAB",readCookie=function(){var i,len,cookieParts,name,cookiesList=document.cookie.split("; ");for(i=0,len=cookiesList.length;len>i;i+=1)if(cookieParts=cookiesList[i].split("="),name=cookieParts.shift(),name===cookieName)return cookieParts.join("=");return""},writeCookie=function(value){var now,options={expires:365,domain:".nytimes.com",path:"/",secure:!1};null===value&&(options.expires=-1),now=new Date,now.setDate(now.getDate()+options.expires),options.expires=now,document.cookie=[cookieName,"=",value,"; expires="+options.expires.toUTCString(),"; path="+options.path,"; domain="+options.domain,options.secure?"; secure":""].join("")},cookiesEnabled=function(){var result,name="NYTCookiesEnabled",exp=new Date;return exp.setTime(exp.getTime()+1e4),document.cookie=name+"=test; expires="+exp.toGMTString(),result=-1!==document.cookie.indexOf(name),result&&(exp=new Date,exp.setTime(exp.getTime()-1e4),document.cookie=name+"=test; expires="+exp.toGMTString()),result};return engine={getCookieName:function(){return cookieName},eachTest:function(iterator){var i;for(i=0;i<tests.length;i+=1)iterator(tests[i],i)},writeStatusToCookie:function(){var cookieValue=[];this.eachTest(function(test){cookieValue.push(test.getTestId()+"|"+test.getUserStatus())}),writeCookie(cookieValue.length>0?cookieValue.join("&"):null)},readStatusFromCookie:function(){var i,cookieValue,cookieValueArray;if(cookiesEnabled())for(cookieValue=readCookie(),cookieValueArray=cookieValue.length>0?cookieValue.split("&"):[],i=0;i<cookieValueArray.length;i+=1)cookieValue=cookieValueArray[i].split("|"),this.eachTest(function(test){test.getTestId()===cookieValue[0]&&test.determine(cookieValue[1])});else this.eachTest(function(test){test.determine(test.STATUS.excluded)})},determineStatus:function(){this.eachTest(function(test){test.determine()})},getApplicationName:function(){if("undefined"==typeof this.applicationName){var meta=document.getElementById("applicationName");this.applicationName=meta?meta.getAttribute("content"):""}return this.applicationName},isAppIncludedInTest:function(test){var i,len,applicationName=this.getApplicationName();if(this.hasClass(document.getElementsByTagName("html")[0],"template-minimal"))return!1;if(!test||!test.applications)return!0;for(i=0,len=test.applications.length;len>i;i+=1)if(test.applications[i]===applicationName)return!0;return!1},findTest:function(query){var found,that=this;return this.eachTest(function(test){found||test.getTestId()!==query&&test.getTestName()!==query||!that.isAppIncludedInTest(test)||(found=test)}),found},getClassNamesForVariants:function(){var names=[],that=this;return this.eachTest(function(test){test.isUserVariant()&&that.isAppIncludedInTest(test)&&names.push(test.getTestName()+"-"+test.getUserStatus())}),names.join(" ")},isUserVariant:function(query){var test=this.findTest(query);return test?test.isUserVariant():!1},isUserControl:function(query){var test=this.findTest(query);return test?test.isUserControl():!1},isUserThrottle:function(){var isThrottle=!1;return this.eachTest(function(test){!isThrottle&&test.isUserThrottle()&&(isThrottle=!0)}),isThrottle},toObject:function(){var obj={};return this.eachTest(function(test){test.isUserThrottle()&&(obj[test.getTestId()]=test.getUserStatus())}),obj},hasClass:function(element,cls){return(" "+element.className+" ").indexOf(" "+cls+" ")>-1}},null!==window.NYTABTEST.configDOMElement&&(tests.length>0&&(engine.readStatusFromCookie(),engine.determineStatus()),engine.writeStatusToCookie()),engine}(),window.magnum=function(){"use strict";var classLength,device,orientationType,viewportClass,currentHeight,isGlobal,eventQueue={},featureFlags=[],rootEl=document.getElementsByTagName("html")[0],prefix="viewport",breakpointPattern="(\\b|\\s)"+prefix+"\\-(small|medium|large)(\\-([0-9]|[1-9][0-9]|1[0-9][0-9]))?\\b",breakpointRegex=new RegExp(breakpointPattern,"g"),breakpoints=[{key:"small",val:315},{key:"small-10",val:450},{key:"small-20",val:600},{key:"medium",val:720},{key:"medium-10",val:765},{key:"medium-20",val:855},{key:"medium-30",val:960},{key:"medium-31",val:975},{key:"medium-40",val:1005},{key:"medium-50",val:1020},{key:"medium-60",val:1050},{key:"large",val:1080},{key:"large-10",val:1125},{key:"large-11",val:1155},{key:"large-20",val:1200},{key:"large-21",val:1215},{key:"large-30",val:1245},{key:"large-40",val:1280},{key:"large-41",val:1335},{key:"large-50",val:1375},{key:"large-51",val:1410},{key:"large-60",val:1607},{key:"large-70",val:1650},{key:"large-80",val:2030}],init=function(){return 0===getClasses().length&&setClasses(""),currentHeight=getHeight(),isGlobal=document.cookie.indexOf("NYT-Edition=edition|GLOBAL")>=0,document.createElement("main"),detectDevice(),detectMoz(),checkSize(),processFlags(),addAbTestClass(),window.onresize=checkSize,"mobile"===device&&(orientationChange(),window.onorientationchange=orientationChange),{on:on,device:device,getWidth:getWidth,getHeight:getHeight,breakpoints:breakpoints,getViewport:getViewport,getOrientation:getOrientation,getViewportInteger:getViewportInteger,getFlags:getFlags,processFlags:processFlags,writeLogo:writeLogo,addNonResponsiveViewportMeta:addNonResponsiveViewportMeta,addViewportMetaFromUrlParam:addViewportMetaFromUrlParam,addAbTestClass:addAbTestClass,addEditionClass:addEditionClass}},getWidth=function(){var func;if(document.documentElement&&document.documentElement.clientWidth)func=function(){return document.documentElement.clientWidth};else if(window.self&&window.self.innerWidth)func=function(){return window.self.innerWidth};else{if(!document.body)return function(){return 0};func=function(){return document.body.clientWidth}}return func}(),getHeight=function(){var func;if(document.documentElement&&document.documentElement.clientHeight)func=function(){return document.documentElement.clientHeight};else if(window.self&&window.self.innerHeight)func=function(){return window.self.innerHeight};else{if(!document.body)return function(){return 0};func=function(){return document.body.clientHeight}}return func}(),on=function(eventName,callback){eventQueue.hasOwnProperty(eventName)?eventQueue[eventName].callbacks.push(callback):eventQueue[eventName]={callbacks:[callback],trigger:createTrigger(eventName)}},createTrigger=function(eventName){return function(){var i,callbacks=eventQueue[eventName].callbacks;for(i=0;i<callbacks.length;i+=1)callbacks[i].apply({},arguments)}},getViewport=function(){return viewportClass},getViewportInteger=function(){var numberString=viewportClass.match(/\d+/),number=numberString?numberString[0]:"00",match=viewportClass.match(/small|medium|large/)[0],sizes={small:1,medium:10,large:100};return parseInt(sizes[match]+""+number,10)},setClasses=function(newClasses){rootEl.className=newClasses},getClasses=function(){return rootEl.className},addClass=function(newClass){setClasses(newClass+" "+getClasses())},changeClass=function(classesArray,regex){var newClasses,classes=getClasses();newClasses=classes.replace(regex,""),newClasses+=" "+classesArray.join(" "),setClasses(newClasses)},detectDevice=function(){var regex=/Android|webOS|iPhone|iPad|iPod|BlackBerry/i,touch=regex.test(navigator.userAgent);device=touch?"mobile":"desktop",addClass(device)},detectMoz=function(){var match=navigator.userAgent.match(/Firefox/i);match&&addClass("moz")},getOrientation=function(){return orientationType},orientationChange=function(){var regex=new RegExp("(\\b|\\s)"+prefix+"\\-(portrait|landscape)\\b","g");orientationType=prefix,orientationType+=90===window.orientation||-90===window.orientation?"-landscape":"-portrait",changeClass([orientationType],regex),eventQueue.orientationChange&&eventQueue.orientationChange.trigger(orientationType,viewportClass)},checkSize=function(){var i,breakpoint,integer,width=getWidth(),newArray=[];for(i=0;i<breakpoints.length&&(breakpoint=breakpoints[i],width>=breakpoint.val||breakpoint.key===breakpoints[0].key);i+=1)newArray.push(prefix+"-"+breakpoint.key);newArray.length!==classLength&&(changeClass(newArray,breakpointRegex),classLength=newArray.length,viewportClass=newArray[classLength-1],integer=getViewportInteger(),eventQueue.breakPoint&&eventQueue.breakPoint.trigger(integer,viewportClass))},processFlags=function(flags){var i,len,featureClasses="";for(featureFlags=flags||[],i=0,len=featureFlags.length;len>i;i+=1)featureClasses+=" flag-"+featureFlags[i]+"-on";addClass(featureClasses)},getFlags=function(){return featureFlags},writeLogo=function(size,path,sectionName,mastheadOverrides){var html,w,h,logo,isGlobal=document.cookie.indexOf("NYT-Edition=edition|GLOBAL")>=0;mastheadOverrides=mastheadOverrides||"";var isTransparent=mastheadOverrides.indexOf("masthead-theme-transparent")>-1||mastheadOverrides.indexOf("masthead-theme-transparent-ffffff")>-1,displayColor=mastheadOverrides.indexOf("masthead-theme-transparent-ffffff")>-1?"white-":"";"large"===size?(w=isGlobal?"450":"370",h=isGlobal?"44":"50"):isGlobal?(w="236",h="22"):isTransparent===!0?(w="magazine"===sectionName?"215":"163",h="30"):(w="185",h="26"),logo=path+(isGlobal?"international-logo-":"nyt-logo-")+displayColor+w+"x"+h,isTransparent===!0&&"magazine"===sectionName&&(logo=path+"magazine-logo-"+displayColor+w+"x"+h),isGlobal&&"mobile"===device&&(w="184",h="26"),html='<svg class="nyt-logo" width="'+w+'" height="'+h+'" role="img" aria-label="The New York Times"><image width="'+w+'" height="'+h+'" xlink:href="'+logo+'.svg" src="'+logo+'.png" alt="The New York Times" border="0" /></svg><img src="'+logo+'.png" class="nyt-logo-print" alt="The New York Times"/>',document.write(html)},addAbTestClass=function(){var i,regex=new RegExp("has-ab-test-[\\w]*-[\\d]","g"),classNamesToAdd=[],classNames=window.NYTABTEST.engine.getClassNamesForVariants();for(classNames=classNames.length>0?classNames.split(" "):[],i=0;i<classNames.length;i+=1)classNamesToAdd.push("has-ab-test-"+classNames[i]);changeClass(classNamesToAdd,regex)},addNonResponsiveViewportMeta=function(width){var browserWidth,viewportTag;browserWidth=window.outerWidth?window.outerWidth:getWidth(),browserWidth>width&&(width=browserWidth),viewportTag=document.createElement("meta"),viewportTag.setAttribute("name","viewport"),viewportTag.setAttribute("content","width="+width+", user-scalable=yes"),document.getElementsByTagName("head")[0].appendChild(viewportTag),checkSize()},addViewportMetaFromUrlParam=function(){var width,viewportTag,match=document.location.search.match(/viewportWidth=(\d+)/);match&&match[1]&&(width=+match[1]),1050>=width&&(viewportTag=document.createElement("meta"),viewportTag.setAttribute("name","viewport"),viewportTag.setAttribute("content","width="+width+", initial-scale=1, maximum-scale=1"),document.getElementsByTagName("head")[0].appendChild(viewportTag),checkSize())},addEditionClass=function(edition){var classToAdd="global"===edition?"edition-international":"edition-domestic";changeClass([classToAdd],new RegExp("edition-[w]*","g"))};return init()}(),window.magnum.responsiveImages=function(){var bleedType,coverImage,coverImageHeight,coverImageWidth,coverImageCaption,story,storyHeader,headline,headlinetxt,headlineCharCount,smartHeadlineFormula,headlineBreakCandidates,storyMeta,storyMetaFooter,storyBody,cover,coverHeight,realImgHeight,realImgWidth,imageAspectRatio,topCropBias,leftCropBias,bottomCropBias,rightCropBias,deckExists,deck,decktxt,decktxtCharCount,deckBreakCandidates,coverWidth=windowWidth,coverToLedeBreakpoint=780,fullBleedImageVerticalBreakpoint=50,windowWidth=window.magnum.getWidth(),windowHeight=window.magnum.getHeight(),setCoverImage=function(imageId,bleedStyle,imgHeight,imgWidth,cropTop,cropRight,cropBottom,cropLeft){cover=document.getElementById("media-"+imageId),coverImage=document.getElementById("media-image-"+imageId),coverImageCaption=document.getElementById("media-caption-"+imageId),story=document.getElementById("story"),storyHeader=document.getElementById("story-header"),headline=document.getElementById("story-heading"),headlinetxt=headline.innerHTML,headlineCharCount=headlinetxt.length,smartHeadlineFormula=/[“"]?[A-Z]+[a-z]*[’,.-:;]?[a-z]?[“"]? /g,headlineBreakCandidates=headlinetxt.match(smartHeadlineFormula),storyMeta=document.getElementById("story-meta"),storyMetaFooter=document.getElementById("story-meta-footer"),storyBody=document.getElementById("story-body"),realImgHeight=imgHeight,realImgWidth=imgWidth,bleedType=bleedStyle,imageAspectRatio=Math.min(realImgWidth/realImgHeight),topCropBias=cropTop,leftCropBias=cropLeft,bottomCropBias=cropBottom,rightCropBias=cropRight,deckExists=document.getElementById("story-deck"),deckExists&&(deck=document.getElementById("story-deck"),decktxt=deck.innerHTML,decktxtCharCount=decktxt.length,deckBreakCandidates=decktxt.match(smartHeadlineFormula)),coverToLedeBreakpoint>windowWidth?(story.className=story.className.replace(/(?:^|\s)has-full-bleed-cover(?!\S)/g,""),story.className+=" has-full-bleed-image-lede",makeFullBleedLede()):"full-bleed"===bleedType?makeFullBleedLede():"full-bleed-cover"===bleedType&&makeFullBleedCover()},makeFullBleedCover=function(){getAllDimensions(),setCoverHeight(windowHeight),setStoryBodyTop(windowHeight+50),fitImage(),makeSmartHeadlines()},makeFullBleedLede=function(){getAllDimensions();var newCoverHeight=windowHeight-headline.clientHeight,percentageOfVerticalImageVisable=newCoverHeight/coverImageHeight*100,imageHeight=coverImageHeight;coverWidth=windowWidth,windowWidth>coverToLedeBreakpoint?(fullBleedImageVerticalBreakpoint>percentageOfVerticalImageVisable&&(newCoverHeight=.01*fullBleedImageVerticalBreakpoint*coverImageHeight),setCoverHeight(newCoverHeight),setStoryBelowCover(),fitImage()):(setCoverHeight(imageHeight),setStoryBodyTop(storyHeader.clientHeight)),makeSmartHeadlines()},fitImage=function(){var imageScaleRatio,coverScaleRatio;getAllDimensions(),imageScaleRatio=realImgHeight/realImgWidth,coverScaleRatio=coverHeight/coverWidth,imageScaleRatio>coverScaleRatio?cropImageHorizontally():coverScaleRatio>imageScaleRatio&&("full-bleed-lede"===bleedType?scaleImageHorizontally():cropImageVertically())},cropImageHorizontally=function(){var offsetTop,newHeight=coverImageWidth/imageAspectRatio;newHeight>coverHeight&&(offsetTop=-Math.abs((newHeight-coverHeight)/2),offsetTop=handleCropBias(offsetTop,"vertical"),coverImage.style.marginTop=offsetTop+"px")},cropImageVertically=function(){var newHeight,newWidth,offsetLeft;getAllDimensions(),newHeight=coverHeight,newWidth=coverHeight*imageAspectRatio,offsetLeft=-Math.abs((coverWidth-newWidth)/2),offsetLeft=handleCropBias(offsetLeft,"horizontal"),coverImage.style.height=newHeight+"px",coverImage.style.width=newWidth+"px",coverImage.style.maxWidth="none",coverImage.style.marginLeft=offsetLeft+"px"},handleCropBias=function(offset,direction){var verticalBias,horizontalBias,pixelsCropped,fullImageWidth=coverHeight*imageAspectRatio,fullImageHeight=coverWidth/imageAspectRatio;return"horizontal"===direction&&(pixelsCropped=fullImageWidth-coverWidth,horizontalBias=(rightCropBias-leftCropBias)/100,offset+=pixelsCropped*horizontalBias),"vertical"===direction&&(pixelsCropped=fullImageHeight-coverHeight,verticalBias=(bottomCropBias-topCropBias)/100,offset+=pixelsCropped*verticalBias),offset},scaleImageHorizontally=function(){var newHeight=windowWidth/imageAspectRatio;setCoverHeight(newHeight),setStoryBelowCover()},makeSmartHeadlines=function(){var theHeadline,theHeadlineHeight,theCharCount,theHeadLineText,theBreaks;storyMeta.style.removeProperty("width"),theHeadline=headline,theHeadlineHeight=headline.clientHeight,theCharCount=headlineCharCount,theHeadLineText=headlinetxt,theBreaks=headlineBreakCandidates,theHeadlineHeight>=184?smartThreeLineHeadline(theHeadline,theCharCount,theHeadLineText,theBreaks):theHeadlineHeight>=120&&smartTwoLineHeadline(theHeadline,theCharCount,theHeadLineText,theBreaks),deckExists&&(theHeadline=deck,theHeadlineHeight=deck.clientHeight,theCharCount=decktxtCharCount,theHeadLineText=decktxt,theBreaks=deckBreakCandidates,theHeadlineHeight>=48&&50>theHeadlineHeight&&smartTwoLineHeadline(theHeadline,theCharCount,theHeadLineText,theBreaks))},smartTwoLineHeadline=function(theHeadline,theCharCount,theHeadLineText,theBreaks){var breakCandidatesLength,firstLineBreakPosition,candidatePosition,optimalFirstLineEnding,i;if(firstLineBreakPosition=0,optimalFirstLineEnding=Math.round(3*theCharCount/7)," "===theHeadLineText.charAt(optimalFirstLineEnding))firstLineBreakPosition=optimalFirstLineEnding;else for(breakCandidatesLength=theBreaks.length,i=0;breakCandidatesLength>i;i++)candidatePosition=theHeadLineText.indexOf(theBreaks[i]),Math.abs(candidatePosition-optimalFirstLineEnding)<Math.abs(firstLineBreakPosition-optimalFirstLineEnding)&&(firstLineBreakPosition=candidatePosition);theHeadline.innerHTML=theHeadLineText.substr(0,firstLineBreakPosition)+" <br />"+theHeadLineText.substr(firstLineBreakPosition)},smartThreeLineHeadline=function(theHeadline,theCharCount,theHeadLineText,theBreaks){var breakCandidatesLength,firstLineBreakPosition,secondLineBreakPosition,candidatePosition,optimalFirstLineEnding,i,optimalSplitPoint,optimalSecondLineEnding;for(optimalSplitPoint=theCharCount/3,firstLineBreakPosition=0,secondLineBreakPosition=0,optimalFirstLineEnding=Math.floor(optimalSplitPoint),optimalSecondLineEnding=Math.floor(2*optimalSplitPoint),breakCandidatesLength=theBreaks.length,i=0;breakCandidatesLength>i;i++)candidatePosition=theHeadLineText.indexOf(theBreaks[i]),Math.abs(candidatePosition-optimalFirstLineEnding)<Math.abs(firstLineBreakPosition-optimalFirstLineEnding)?firstLineBreakPosition=candidatePosition:Math.abs(candidatePosition-optimalSecondLineEnding)<Math.abs(secondLineBreakPosition-optimalSecondLineEnding)&&(secondLineBreakPosition=candidatePosition);"full-bleed-cover"===bleedType&&(storyMeta.style.width="73%"),theHeadline.innerHTML=theHeadLineText.substr(0,firstLineBreakPosition)+" <br />"+theHeadLineText.substring(firstLineBreakPosition,secondLineBreakPosition)+"<br />"+theHeadLineText.substr(secondLineBreakPosition)},setStoryBelowCover=function(){var storyHeaderHeight=storyHeader.clientHeight;setStoryBodyTop(storyHeaderHeight)},getAllDimensions=function(){windowHeight=window.magnum.getHeight(),windowWidth=window.magnum.getWidth(),coverHeight=cover.clientHeight,coverWidth=cover.clientWidth,coverImageHeight=coverImage.clientHeight,coverImageWidth=coverImage.clientWidth},setStoryBodyTop=function(top){storyBody.style.marginTop=top+"px"},setCoverHeight=function(height){cover.style.height=height+"px",setCaptionPosition(height)},setCaptionPosition=function(top){coverImageCaption&&(coverImageCaption.style.top=top+7+"px")};return{coverToLedeBreakpoint:coverToLedeBreakpoint,setCoverImage:setCoverImage,makeFullBleedCover:makeFullBleedCover,makeFullBleedLede:makeFullBleedLede}}(),window.Modernizr=function(a,b,c){function C(a){j.cssText=a}function D(a,b){return C(n.join(a+";")+(b||""))}function E(a,b){return typeof a===b}function F(a,b){return!!~(""+a).indexOf(b)}function G(a,b){for(var d in a){var e=a[d];if(!F(e,"-")&&j[e]!==c)return"pfx"==b?e:!0}return!1}function H(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:E(f,"function")?f.bind(d||b):f}return!1}function I(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return E(b,"string")||E(b,"undefined")?G(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),H(e,b,c))}function J(){e.input=function(c){for(var d=0,e=c.length;e>d;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var e,f,h,d=0,i=a.length;i>d;d++)k.setAttribute("type",f=a[d]),e="text"!==k.type,e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&"textfield"!==h.getComputedStyle(k,null).WebkitAppearance&&0!==k.offsetHeight,g.removeChild(k)):/^(search|tel)$/.test(f)||(e=/^(url|email)$/.test(f)?k.checkValidity&&k.checkValidity()===!1:k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var x,B,d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,y=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))for(;d--;)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},z=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=E(e[d],"function"),E(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),A={}.hasOwnProperty;B=E(A,"undefined")||E(A.call,"undefined")?function(a,b){return b in a&&E(a.constructor.prototype[b],"undefined")}:function(a,b){return A.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if("function"!=typeof c)throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e}),s.flexbox=function(){return I("flexWrap")},s.flexboxlegacy=function(){return I("boxDirection")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!E(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},s.geolocation=function(){return"geolocation"in navigator},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!I("indexedDB",a)},s.hashchange=function(){return z("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!!a.history&&!!history.pushState},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},s.rgba=function(){return C("background-color:rgba(150,255,150,.5)"),F(j.backgroundColor,"rgba")},s.hsla=function(){return C("background-color:hsla(120,40%,100%,.5)"),F(j.backgroundColor,"rgba")||F(j.backgroundColor,"hsla")},s.multiplebgs=function(){return C("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return I("backgroundSize")},s.borderimage=function(){return I("borderImage")},s.borderradius=function(){return I("borderRadius")},s.boxshadow=function(){return I("boxShadow")},s.textshadow=function(){return""===b.createElement("div").style.textShadow},s.opacity=function(){return D("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return I("animationName")},s.csscolumns=function(){return I("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return C((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),F(j.backgroundImage,"gradient")},s.cssreflections=function(){return I("boxReflect")},s.csstransforms=function(){return!!I("transform")},s.csstransforms3d=function(){var a=!!I("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b){a=9===b.offsetLeft&&3===b.offsetHeight}),a},s.csstransitions=function(){return I("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&0===g.indexOf(d.split(" ")[0])}),a},s.generatedcontent=function(){var a;return y(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var K in s)B(s,K)&&(x=K.toLowerCase(),e[x]=s[K](),v.push((e[x]?"":"no-")+x));return e.input||J(),e.addTest=function(a,b){if("object"==typeof a)for(var d in a)B(a,d)&&e.addTest(d,a[d]);else{if(a=a.toLowerCase(),e[a]!==c)return e;b="function"==typeof b?b():b,"undefined"!=typeof f&&f&&(g.className+=" has-"+(b?"":"no-")+a),e[a]=b}return e},C(""),i=k=null,e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.hasEvent=z,e.testProp=function(a){return G([a])},e.testAllProps=I,e.testStyles=y,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" has-js has-"+v.join(" has-"):""),e}(this,this.document),function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return"string"==typeof a?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){if(c||(c=b),j)return c.createElement(a);f||(f=m(c));var g;return g=f.cache[a]?f.cache[a].cloneNode():e.test(a)?(f.cache[a]=f.createElem(a)).cloneNode():f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){if(a||(a=b),j)return a.createDocumentFragment();c=c||m(a);for(var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;g>e;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}function v(a){for(var b,c=a.getElementsByTagName("*"),d=c.length,e=RegExp("^(?:"+l().join("|")+")$","i"),f=[];d--;)b=c[d],e.test(b.nodeName)&&f.push(b.applyElement(w(b)));return f}function w(a){for(var b,c=a.attributes,d=c.length,e=a.ownerDocument.createElement(t+":"+a.nodeName);d--;)b=c[d],b.specified&&e.setAttribute(b.nodeName,b.nodeValue);return e.style.cssText=a.style.cssText,e}function x(a){for(var b,c=a.split("{"),d=c.length,e=RegExp("(^|[\\s,>+~])("+l().join("|")+")(?=[[\\s,>+~#.:]|$)","gi"),f="$1"+t+"\\:$2";d--;)b=c[d]=c[d].split("}"),b[b.length-1]=b[b.length-1].replace(e,f),c[d]=b.join("}");return c.join("{")}function y(a){for(var b=a.length;b--;)a[b].removeNode()}function z(a){function g(){clearTimeout(d._removeSheetTimer),b&&b.removeNode(!0),b=null}var b,c,d=m(a),e=a.namespaces,f=a.parentWindow;return!u||a.printShived?a:("undefined"==typeof e[t]&&e.add(t),f.attachEvent("onbeforeprint",function(){g();
for(var d,e,f,h=a.styleSheets,i=[],j=h.length,l=Array(j);j--;)l[j]=h[j];for(;f=l.pop();)if(!f.disabled&&s.test(f.media)){try{d=f.imports,e=d.length}catch(m){e=0}for(j=0;e>j;j++)l.push(d[j]);try{i.push(f.cssText)}catch(m){}}i=x(i.reverse().join("")),c=v(a),b=k(a,i)}),f.attachEvent("onafterprint",function(){y(c),clearTimeout(d._removeSheetTimer),d._removeSheetTimer=setTimeout(g,500)}),a.printShived=!0,a)}var f,j,c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^<|^(?:a|b|button|code|div|fieldset|form|h1|h2|h3|h4|h5|h6|i|iframe|img|input|label|li|link|ol|option|p|param|q|script|select|span|strong|style|table|tbody|td|textarea|tfoot|th|thead|tr|ul)$/i,g="_html5shiv",h=0,i={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){f=!0,j=!0}}();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b);var s=/^$|\b(?:all|print)\b/,t="html5shiv",u=!j&&function(){var c=b.documentElement;return"undefined"!=typeof b.namespaces&&"undefined"!=typeof b.parentWindow&&"undefined"!=typeof c.applyElement&&"undefined"!=typeof c.removeNode&&"undefined"!=typeof a.attachEvent}();r.type+=" print",r.shivPrint=z,z(b)}(this,document);var requirejs,require,define;!function(global){function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){if(ary){var i;for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}}function eachReverse(ary,func){if(ary){var i;for(i=ary.length-1;i>-1&&(!ary[i]||!func(ary[i],i,ary));i-=1);}}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){(force||!hasProp(target,prop))&&(deepStringMixin&&"string"!=typeof value?(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)):target[prop]=value)}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}function newContext(contextName){function trimDots(ary){var i,part;for(i=0;ary[i];i+=1)if(part=ary[i],"."===part)ary.splice(i,1),i-=1;else if(".."===part){if(1===i&&(".."===ary[2]||".."===ary[0]))break;i>0&&(ary.splice(i-1,2),i-=2)}}function normalize(name,baseName,applyMap){var pkgName,pkgConfig,mapValue,nameParts,i,j,nameSegment,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),normalizedBaseParts=baseParts,map=config.map,starMap=map&&map["*"];if(name&&"."===name.charAt(0)&&(baseName?(normalizedBaseParts=getOwn(config.pkgs,baseName)?baseParts=[baseName]:baseParts.slice(0,baseParts.length-1),name=normalizedBaseParts.concat(name.split("/")),trimDots(name),pkgConfig=getOwn(config.pkgs,pkgName=name[0]),name=name.join("/"),pkgConfig&&name===pkgName+"/"+pkgConfig.main&&(name=pkgName)):0===name.indexOf("./")&&(name=name.substring(2))),applyMap&&(baseParts||starMap)&&map){for(nameParts=name.split("/"),i=nameParts.length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if(mapValue=getOwn(map,baseParts.slice(0,j).join("/")),mapValue&&(mapValue=getOwn(mapValue,nameSegment))){foundMap=mapValue,foundI=i;break}if(foundMap)break;!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){return scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName?(scriptNode.parentNode.removeChild(scriptNode),!0):void 0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);return pathConfig&&isArray(pathConfig)&&pathConfig.length>1?(removeScript(id),pathConfig.shift(),context.require.undef(id),context.require([id]),!0):void 0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),nameParts=splitPrefix(name),prefix=nameParts[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):normalize(name,parentName,applyMap):(normalizedName=normalize(name,parentName,applyMap),nameParts=splitPrefix(normalizedName),prefix=nameParts[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?getModule(depMap).on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(apsp.apply(defQueue,[defQueue.length-1,0].concat(globalDefQueue)),globalDefQueue=[])}function cleanRegistry(id){delete registry[id]}function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}function checkLoaded(){var map,modId,err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(registry,function(mod){if(map=mod.map,modId=map.id,mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?(usingPathFallback=!0,stillLoading=!0):(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads),err.contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){breakCycle(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(args=defQueue.shift(),null===args[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}}var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},map:{},config:{}},registry={},undefEvents={},defQueue=[],defined={},urlFetched={},requireCounter=1,unnormalizedCounter=1;return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){return mod.usingExports=!0,mod.map.isDefine?mod.exports?mod.exports:mod.exports=defined[mod.map.id]={}:void 0},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return config.config&&getOwn(config.config,mod.map.id)||{}},exports:defined[mod.map.id]}}},Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},Module.prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;return this.shim?void context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()})):map.prefix?this.callPlugin():this.load()}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&(cjsModule=this.module,cjsModule&&void 0!==cjsModule.exports&&cjsModule.exports!==this.exports?exports=cjsModule.exports:void 0===exports&&this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=[this.map.id],err.requireType="define",onError(this.error=err)}else exports=factory;this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad&&req.onResourceLoad(context,this.map,this.depMaps)),delete registry[id],this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),on(normalizedMap,"defined",bind(this,function(value){this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),normalizedMod=getOwn(registry,normalizedMap.id),void(normalizedMod&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):(load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})}),load.error=bind(this,function(err){this.inited=!0,this.error=err,err.requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.defineDep(i,depExports),this.check()})),this.errback&&on(depMap,"error",this.errback)}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,configure:function(cfg){cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/");var pkgs=config.pkgs,shim=config.shim,objs={paths:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?"map"===prop?mixin(config[prop],value,!0,!0):mixin(config[prop],value,!0):config[prop]=value}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&(each(cfg.packages,function(pkgObj){var location;pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj,location=pkgObj.location,pkgs[pkgObj.name]={name:pkgObj.name,location:location||pkgObj.name,main:(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}}),config.pkgs=pkgs),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){function fn(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}return fn},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,map,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap):(map=makeModuleMap(deps,relMap,!1,!0),id=map.id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),requireMod=getModule(makeModuleMap(null,relMap)),requireMod.skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,url,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0],isRelative="."===segment||".."===segment;return-1!==index&&(!isRelative||index>1)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),url=context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext||".fake"),ext?url:url.substring(0,url.length-5)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);delete defined[id],delete urlFetched[map.url],delete undefEvents[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){var mod=getOwn(registry,depMap.id);mod&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(args=defQueue.shift(),null===args[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext){var paths,pkgs,pkg,pkgPath,syms,i,parentModule,url,parentPath;if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,pkgs=config.pkgs,syms=moduleName.split("/"),i=syms.length;i>0;i-=1){if(parentModule=syms.slice(0,i).join("/"),pkg=getOwn(pkgs,parentModule),parentPath=getOwn(paths,parentModule)){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}if(pkg){pkgPath=moduleName===pkg.name?pkg.location+"/"+pkg.main:pkg.location,syms.splice(0,i,pkgPath);break}}url=syms.join("/"),url+=ext||(/\?/.test(url)?"":".js"),url=("/"===url.charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs?url+((-1===url.indexOf("?")?"?":"&")+config.urlArgs):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);return hasPathFallback(data.id)?void 0:onError(makeError("scripterror","Script error",evt,[data.id]))}},context.require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(script){return"interactive"===script.readyState?interactiveScript=script:void 0}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.1.4",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,ap=Array.prototype,apsp=ap.splice,isBrowser=!("undefined"==typeof window||!navigator||!document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}"undefined"==typeof require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),context=getOwn(contexts,contextName),context||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick="undefined"!=typeof setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],baseElement=document.getElementsByTagName("base")[0],baseElement&&(head=s.head=baseElement.parentNode)),req.onError=function(err){throw err},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};return isBrowser?(node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script"),node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=!0,node.setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node):void(isWebWorker&&(importScripts(url),context.completeLoad(moduleName)))},isBrowser&&eachReverse(scripts(),function(script){return head||(head=script.parentNode),dataMain=script.getAttribute("data-main"),dataMain?(cfg.baseUrl||(src=dataMain.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath,dataMain=mainScript),dataMain=dataMain.replace(jsSuffixRegExp,""),cfg.deps=cfg.deps?cfg.deps.concat(dataMain):[dataMain],!0):void 0}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=[]),!deps.length&&isFunction(callback)&&callback.length&&(callback.toString().replace(commentRegExp,"").replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps)),useInteractive&&(node=currentlyAddingScript||getInteractiveScript(),node&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")])),(context?context.defQueue:globalDefQueue).push([name,deps,callback])},define.amd={jQuery:!0},req.exec=function(text){return eval(text)},req(cfg)}}(this),function(){"use strict";function c(a){var g,f=d;a:{g=f.className.split(/\s+/);for(var n=0,H=g.length;H>n;n+=1)if(g[n]===a){g=!0;break a}g=!1}g||(f.className+=(""===f.className?"":" ")+a)}function e(a,f,g){this.b=null!=a?a:null,this.c=null!=f?f:null,this.g=null!=g?g:null}function k(a,f){return 0===a.compare(f)||1===a.compare(f)}function l(){var a=h.exec(m[1]),f=null,g=null,n=null;return a&&(null!==a[1]&&a[1]&&(f=parseInt(a[1],10)),null!==a[2]&&a[2]&&(g=parseInt(a[2],10)),null!==a[3]&&a[3]&&(n=parseInt(a[3],10))),new e(f,g,n)}function p(){var a=q;return 3===a.a||7===a.a||6===a.a||9===a.a||8===a.a||5===a.a?"grayscale":1===a.a&&k(a.d,new e(6,2))&&1===a.e?"grayscale":"unknown"}var b=window,h=/^([0-9]+)(?:[\._-]([0-9]+))?(?:[\._-]([0-9]+))?(?:[\._+-]?(.*))?$/;e.prototype.compare=function(a){return this.b>a.b||this.b===a.b&&this.c>a.c||this.b===a.b&&this.c===a.c&&this.g>a.g?1:this.b<a.b||this.b===a.b&&this.c<a.c||this.b===a.b&&this.c===a.c&&this.g<a.g?-1:0};var q,r=b.navigator.userAgent,s=0,t=new e,u=0,v=new e,m=null;(m=/(?:iPod|iPad|iPhone).*? OS ([\d_]+)/.exec(r))?(u=3,v=l()):(m=/(?:BB\d{2}|BlackBerry).*?Version\/([^\s]*)/.exec(r))?(u=9,v=l()):(m=/Android ([^;)]+)|Android/.exec(r))?(u=5,v=l()):(m=/Windows Phone(?: OS)? ([^;)]+)/.exec(r))?(u=8,v=l()):(m=/Linux ([^;)]+)|Linux/.exec(r))?(u=4,v=l()):(m=/OS X ([^;)]+)/.exec(r))?(u=2,v=l()):(m=/Windows NT ([^;)]+)/.exec(r))?(u=1,v=l()):(m=/CrOS ([^;)]+)/.exec(r))&&(u=6,v=l()),(m=/MSIE ([\d\w\.]+)/.exec(r))?(s=1,t=l()):(m=/Trident.*rv:([\d\w\.]+)/.exec(r))?(s=1,t=l()):(m=/OPR\/([\d.]+)/.exec(r))?(s=4,t=l()):(m=/Opera Mini.*Version\/([\d\.]+)/.exec(r))?(s=4,t=l()):(m=/Opera(?: |.*Version\/|\/)([\d\.]+)/.exec(r))?(s=4,t=l()):(m=/Firefox\/([\d\w\.]+)|Firefox/.exec(r))?(s=3,t=l()):(m=/(?:Chrome|CrMo|CriOS)\/([\d\.]+)/.exec(r))?(s=2,t=l()):(m=/Silk\/([\d\._]+)/.exec(r))?(s=7,t=l()):5===u||9===u?s=6:(m=/Version\/([\d\.\w]+).*Safari/.exec(r))&&(s=5,t=l()),q=new function(a,f,g,n){this.e=a,this.f=f,this.a=g,this.d=n}(s,t,u,v);var w,x;if(1===q.a){var y;if(2===q.e)y=k(q.f,new e(37))&&k(q.d,new e(6,1))?"directwrite":"gdi";else{var z;if(4===q.e)z=k(q.f,new e(24))&&k(q.d,new e(6,1))?"directwrite":"gdi";else{var A;if(-1===q.d.compare(new e(6,0)))A="gdi";else{var B;if(k(q.d,new e(6,0))){var C;if(C=1===q.e){var D=q.f,E=new e(8,0);C=0===D.compare(E)||-1===D.compare(E)}B=C?"gdi":"directwrite"}else B="unknown";A=B}z=A}y=z}x=y}else x=8===q.a?"directwrite":2===q.a||3===q.a?"coretext":5===q.a||4===q.a||6===q.a||7===q.a||9===q.a?"freetype":"unknown";w=x;var G,F=p(),I=p();G="unknown"!==I?I:2===q.a||4===q.a?"subpixel":1===q.a?k(q.d,new e(6,0))?"subpixel":1===q.e?k(q.f,new e(7,0))?"subpixel":"grayscale":"subpixel":"unknown";var d=b.document.documentElement;c("tr-"+w),"unknown"===F&&"unknown"!==G&&(F+="-"+G),c("tr-aa-"+F)}();

/**
 * Creates a host object that adjusts with each of the different environments
 *
 * <p><b>Require Path:</b> foundation/hosts</p>
 *
 * @module Foundation
 * @class Hosts
 * @static
 **/
define(function () {
    'use strict';
    var secure = window.location.protocol.indexOf('https') === 0;

    var env_deploy_imageHost = 'http://static01.nyt.com';
    var env_deploy_jsHost = 'http://static01.nyt.com';
    var env_deploy_cssHost = 'http://static01.nyt.com';
    var env_deploy_jsonHost = 'http://json8.nytimes.com';
    var env_deploy_imageSecureHost = 'https://static.nytimes.com';
    var env_deploy_jsSecureHost = 'https://static.nytimes.com';
    var env_deploy_cssSecureHost = 'https://static.nytimes.com';
    var env_deploy_jsonSecureHost = 'https://static.nytimes.com';
    var env_deploy_wwwHost = '//www.nytimes.com';
    var env_deploy_internationalHost = '//international.nytimes.com';
    var env_deploy_adxHost = '//www.nytimes.com';
    var env_deploy_authHost = 'https://myaccount.nytimes.com';
    var env_deploy_mtrSvcHost = '//meter-svc.nytimes.com';
    var env_deploy_profileImageHost = '//s3.amazonaws.com/pimage.timespeople.nytimes.com';
    var env_deploy_tagxHost = '//tagx.nytimes.com';
    var env_deploy_msgHost = 'http://www.nytimes.com';
    var env_deploy_msgSocketHost = 'http://core.fabrik.nytimes.com';
    var env_deploy_communityHost = '//www.nytimes.com';
    var env_deploy_dataUniverseHost = 'http://www.nytimes.com';
    var env_deploy_comscorePvcHost = '//www.nytimes.com';
    var env_deploy_s1Host = '//s1.nyt.com';
    var env_deploy_mobileWebHost = '//mobile.nytimes.com';
    var env_deploy_searchHost = '//query.nytimes.com';
    var env_deploy_addHost = 'http://www.nytimes.com';
    var env_deploy_realestateBasicSearchHost = 'http://realestate.nytimes.com/JSONSuggestService.aspx';
    var env_deploy_realestateSmartSearchHost = 'http://service-nytimes.gabriels.net/v1.1/SmartSearchResults.aspx';
    var env_deploy_realestateResultsHost = 'http://realestate.nytimes.com';
    var env_deploy_realestatePostAdLinkHost = '//realestateads.nytimes.com/';
    var env_deploy_realestateJsonHost = 'http://a1.nyt.com';
    var env_deploy_followApiHost = 'http://www.nytimes.com/svc/pushmobile/follow/v0';
    var env_deploy_followListHost = 'http://s1.nyt.com/messaging/follow';

    return {
        image: secure ? env_deploy_imageSecureHost : env_deploy_imageHost,
        js: secure ? env_deploy_jsSecureHost : env_deploy_jsHost,
        css: secure ? env_deploy_cssSecureHost : env_deploy_cssHost,
        json: secure ? env_deploy_jsonSecureHost : env_deploy_jsonHost,
        www: env_deploy_wwwHost,
        international: env_deploy_internationalHost,
        adx: env_deploy_adxHost,
        myaccount: env_deploy_authHost,
        meterSvc: env_deploy_mtrSvcHost,
        profileImage: env_deploy_profileImageHost,
        tagx: env_deploy_tagxHost,
        msg: env_deploy_msgHost,
        msgSocket: env_deploy_msgSocketHost,
        community: env_deploy_communityHost,
        du: env_deploy_dataUniverseHost,
        comscorePvc: env_deploy_comscorePvcHost,
        s1: env_deploy_s1Host,
        mobileWeb: env_deploy_mobileWebHost,
        search: env_deploy_searchHost,
        add: env_deploy_addHost,
        realestateBasicSearch: env_deploy_realestateBasicSearchHost,
        realestateSmartSearch: env_deploy_realestateSmartSearchHost,
        realestateResults: env_deploy_realestateResultsHost,
        realestatePostAdLink: env_deploy_realestatePostAdLinkHost,
        realestateJsonHost: env_deploy_realestateJsonHost,
        followApi: env_deploy_followApiHost,
        followableList: env_deploy_followListHost
    };
});

/* $Id: mtr.js 148479 2015-01-14 16:26:17Z shawn.gao $ */
/*! mtr 07-10-2014 */
!function(a){"use strict";"function"==typeof define&&define.amd?define("ecomm/utils",["jquery/nyt"],function(b){return a(b)}):"object"==typeof NYTD&&(NYTD.Ecomm=NYTD.Ecomm||{},NYTD.Ecomm.Utils=a(NYTD.jQuery||window.jQuery))}(function(a){var b={};return b.setCookie=function(a,b,c){var d=new Date;d.setTime(d.getTime()),c&&(c=1e3*c*60*60*24);var e=new Date(d.getTime()+c),f=a+"="+b+";path=/"+(c?";expires="+e.toGMTString():"")+";domain=.nytimes.com";document.cookie=f},b.getCookie=function(a){return new RegExp(a+"=([^;]+)","i").test(unescape(document.cookie))?RegExp.$1:null},b.setToLocalStorage=function(a,c){if(b.hasLocalStorage())try{window.localStorage.setItem(a,c)}catch(d){}},b.hasLocalStorage=function(){if(/MSIE 8.0/.test(navigator.userAgent))return!1;try{return"localStorage"in window&&null!==window.localStorage}catch(a){return!1}},b.getFromLocalStorage=function(a){try{return b.hasLocalStorage()&&window.localStorage.getItem(a)}catch(c){return null}},b.filterObject=function(b,c){var d={};return a.each(b,function(b,e){a.inArray(b,c)>-1&&(d[b]=e)}),d},b.updateQueryStringParameter=function(a,b,c){var d,e=new RegExp("([?|&])"+b+"=.*?(&|$)","i"),f=-1!==a.indexOf("?")?"&":"?";return d=a.match(e)?a.replace(e,"$1"+b+"="+c+"$2"):a+f+b+"="+c},b.ET={},b.ET.processUrlHref=function(a,c){var d,e,f,g=a.attr("href"),h=b.updateQueryStringParameter;if(!(!g||g.match(/^javascript:/i)||g.match(/^mailto:/i)||g.match(/^tel:/i)||g.match("#"))){if(g=decodeURIComponent(g),e=g.match("[?|&]goto=([^;]+)"),d=e&&e[1]||null){for(f in c)d=h(d,f,c[f]);g=h(g,"goto",encodeURIComponent(d))}else for(f in c)g=h(g,f,c[f]);a.attr("href",g)}},b.ET.track=function(a,c,d){b.runWhenReady(function(){return"TAGX"in window},function(){TAGX.EventProxy.trigger(a,c,d)},1e3,10)},b.ET.addAnchorTracking=function(c,d,e){e=e||"";var f=function(c,f){var g,h=a(f),i=d;if(h.hasClass("login-modal-trigger"))g="login-click",h.on("click",function(){var c=a.extend(!0,{},i.common,i.modalLogin);b.ET.track(e+g,c,"interaction")});else if(h.hasClass("registration-modal-trigger"))g="regi-click",a(this).on("click",function(){var c=a.extend({},i.common,i.modalRegi);b.ET.track(e+g,c,"interaction")});else{var j=b.filterObject(h.data(),["contentCollection","contentPlacement"]),k=a.extend({},i.common,i.links,j);b.ET.processUrlHref(h,k)}};c.find("a").each(f)},b.runWhenReady=function(a,b,c,d){d=d||5,setTimeout(function e(){a()?b():--d&&setTimeout(e,c)},c)},b.pageType=function(){var b=a("meta[name='PT']")[0];return b=b&&b.content||"",b.replace(/ /g,"")}(),b.isNYT5Env=function(){var a=document.getElementsByName("sourceApp"),b={"nyt-v5":!0,blogs:!0};return"undefined"!=typeof a[0]&&a[0].getAttribute("content")in b},b.appendAds=function(b,c){var d="",e="";return c=c||a("body"),a.each(b.ads,function(a,b){b.campaign&&(d+=b.campaign),e+=b.creative}),c.append(e),d},b}),function(a){"use strict";"function"==typeof define&&define.amd?define("ecomm/etTracker",["jquery/nyt","ecomm/utils"],function(b,c){return a(b,c)}):"object"==typeof NYTD&&(NYTD.Ecomm=NYTD.Ecomm||{},NYTD.Ecomm.EtTracker=a(NYTD.jQuery||window.jQuery,NYTD.Ecomm.Utils))}(function(a,b){function c(b){this.$container=b.$container,this.module=b.module,this.region=b.region,this.meterCount=b.meterCount||d(),this.pgtype=b.pgtype||"",this.adxCampaignName=b.adxCampaignName||"",this.trackingParams={common:{version:"meter at "+this.meterCount,pgtype:this.pgtype,region:this.region,contentId:this.adxCampaignName},load:{module:this.module,action:"Impression",eventName:"Impression"},close:{module:this.module,action:"click",eventName:"Dismiss"+this.module},modalRegi:{module:this.module+"-Regi",action:"click",eventName:"regi-click"},modalLogin:{module:this.module+"-Login",action:"click",eventName:"login-click"},links:{module:this.module+"-Links",action:"click",contentCollection:this.module.toLowerCase()+"-links-click"}},this.trackingParams=a.extend(!0,{},this.trackingParams,b.trackingParams),this.skipAnchorTracking=b.skipAnchorTracking||!1,this.init()}var d=function(){if(!d.ret){var a=b.getCookie("nyt-m")||b.getFromLocalStorage("nyt-m")||window.name||"",c=a.match(/v=i.([0-9]+)/);d.ret=c&&c[1]?parseInt(c[1],10):null}return d.ret};return c.prototype.init=function(){b.ET.track(this.module.toLowerCase()+"-load",a.extend({},this.trackingParams.common,this.trackingParams.load),"impression"),this.skipAnchorTracking||this.setAnchorTracking()},c.prototype.setAnchorTracking=function(){var c=this,d=c.anchorPrefix||"z";b.ET.addAnchorTracking(this.$container,this.trackingParams,d),a(document).on(this.module+".updateAnchorETParams",function(){b.ET.addAnchorTracking(c.$container,c.trackingParams,d)})},c.prototype.track=function(c,d){var e,f=this.trackingParams;e=a.extend({},f.common,f[d]),b.ET.track(c,e,"interaction")},c}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("auth/gateway/creatives",["jquery/nyt"],function(a){return b(a)}):"object"==typeof a.NYTD&&(NYTD.GatewayCreatives=b(NYTD.jQuery||window.jQuery))}(this,function(){var a=encodeURIComponent(window.location.protocol+"//")+window.location.host+encodeURIComponent(window.location.pathname)+window.location.search;return{defaultPayCreative:['<div style="color: #000 !important; text-align: left !important; padding: 10px 10px 10px 15px; border: 5px solid #8f8c89 ; width: 751px ; margin: 0 auto ; height: 375px ; background: #ffffff ; -moz-border-radius: .8em !important; -webkit-border-radius: .8em !important; border-radius: .8em !important;">',"<div>",'<p style="font-family: georgia, verdana, serif !important; font-size: 27px !important; font-weight: bold !important; font-style: normal !important; margin: 10px 0 0 0; line-height: 130% !important;">',"Thank you for visiting NYTimes.com","</p>","</div>","<div>",'<div style="width: 460px; margin-right: 5px; float: left;">','<p style="font-family: georgia, verdana, serif !important; font-style: normal !important; margin: 22px 0 0 0; font-size: 15px !important; line-height: 140% !important;">',"If you are already a subscriber ",'<a class="sitewideLogInModal login-modal-trigger" style="color: #blue; text-decoration: underline; color: #002c5e; cursor:pointer;" id="NYTDGWY_login" href="https://myaccount.nytimes.com/auth/login">log in here</a>.',"</p>",'<p style="font-family: georgia, verdana, serif !important; font-style: normal !important; margin: 22px 0 0 0; font-size: 15px !important; line-height: 140% !important;">',"To see subscription options ",'<a data-content-collection="GWtoDSLP"  data-content-placement="1" style="color: #blue; text-decoration: underline; color: #002c5e; cursor:pointer;" id="NYTDGWY_LP" href="http://www.nytimes.com/subscriptions/Multiproduct/lp87JHJ.html?campaignId=44U9H">click here</a>.',"</p>","</div>",'<div style="width: 280px; float: left; margin: 35px 0 0 0;">','<img src="http://graphics8.nytimes.com/subscriptions/gateway/gw1/img/devices-white.jpg" alt="" width="280" height="150" alt="The New York Times Digital Platforms"/>',"</div>",'<div style="clear: both; margin: 0; padding-top: 10px;">','<div style="float: right; width: 220px; text-align: right;">','<img src="http://graphics8.nytimes.com/subscriptions/gateway/gw1/img/nyt-logo-white.gif" alt="The New York Times" width="195" height="31"/>',"</div>","</div>",'<div style="position: absolute;bottom: 20px;">','<p style="font-family: georgia, verdana, serif !important; font-style: normal !important; margin: 22px 0 0 0; font-size: 15px !important; line-height: 140% !important;">',"For questions about your account, contact Customer Care at ",'<a style="color: #blue; text-decoration: underline; color: #002c5e; cursor:pointer;" href="tel:18005919233">1-800-591‑9233</a>.',"</p>","</div>","</div>","</div>"].join("\n"),defaultRegiCreative:['<div style="width:775px !important; height:402px !important; margin: 0 auto; background-color:#FFF; position: relative !important;">','<div id="register-at-btn" style="position: absolute !important; top:165px !important; left:259px !important; display: block; width:260px !important; height:100px !important;">','<a href="#" style="padding:6px 100px !important;background-color:#5874c0 !important;color:#FFF !important;text-decoration: none !important;font-family: Arial, Helvetica, sans-serif !important;font-size:16px !important;">Register</a>',"</div>",'<div style="position: absolute !important; top:250px !important; left:21px !important; width:733px !important; height: 131px !important; background-color:#f2f2f2 !important; border-top: 1px solid #c0c0c0 !important;">','<div style="float:left;">','<p style="padding-left: 152px !important;font-family: Arial, Helvetica, sans-serif !important;font-size:15px !important; color: #2e2e2e !important; margin-top:15px;">Already registered?</p>','<p style="padding-left: 152px !important;font-family: Arial, Helvetica, sans-serif !important;font-size:15px !important; color: #2e2e2e !important; margin-top:-10px;"><a data-content-collection="RWtoLogin" href="https://myaccount.nytimes.com/auth/login" style="text-decoration:none;color:#5874c0;font-weight: bold;">Log In &raquo;</a></p>',"</div>",'<div style="float:left;">','<p style="padding-left: 100px !important;font-family: Arial, Helvetica, sans-serif;font-size:15px; color: #2e2e2e; margin-top:15px; line-height:18.75px;">Or, subscribe now and get<br />unlimited access to all of our articles.<br /><span style="font-weight:bold !important">Just 99¢ for your first 4 weeks.</span></p>','<p style="padding-left: 100px !important;font-family: Arial, Helvetica, sans-serif;font-size:15px; color: #2e2e2e; margin-top:-10px; line-height:18.75px;"><a data-content-collection="RWtoDSLP"  data-content-placement="1" href="http://www.nytimes.com/subscriptions/Multiproduct/lp5558.html?campaignId=368YY" style="text-decoration:none;color:#5874c0;font-weight: bold !important; margin-top:12px !important;">See subscription options &raquo;</a></p>','<p style="margin-top:20px !important;margin-bottom:none !important;padding-left: 100px !important;font-family: Arial, Helvetica, sans-serif;font-size:13px; line-height:16.25px;"><a data-content-collection="RWtoTOS" href="http://www.nytimes.com/content/help/rights/terms/terms-of-service.html" style="color:#5874c0;">Terms of Service</a> | <a data-content-collection="RWtoPP" href="http://www.nytimes.com/content/help/rights/privacy/policy/privacy-policy.html" style="color:#5874c0;">Privacy Policy</a></p>',"</div>","</div>",'<div id="register-at-box" style="position: absolute !important; top:151px !important; left:207px !important; display: none; width:360px !important; height:310px !important; background-color: #FFF !important; border: 1px solid #dedede !important; -webkit-box-shadow: 0 0 7px #ccc !important; -moz-box-shadow: 0 0 7px #ccc !important; box-shadow: 0 0 7px #ccc !important;">','<div style="width:340px !important; height:20px !important; margin:auto !important; padding-top: 7px !important; border-bottom: 1px solid #c0c0c0 !important; position: relative !important; margin-bottom: 16px !important;">','<a id="close-register-at-box" href="#" style="position: absolute !important; display: block !important; top:0 !important; right: 0 !important; width: 54px !important; height: 26px !important;"><img src="http://graphics8.nytimes.com/subscriptions/regiwall/close.png" alt="CLOSE" border="0"/></a><span style="font-family: Arial, Helvetica, sans-serif !important;font-size:10px !important; color: #2e2e2e !important;">REGISTER AT NYTIMES.COM</span>',"</div>",'<div style="float:left;display:inline;width:128px !important;text-align:right !important;padding-bottom:10px !important;padding-right:10px !important;padding-top:3px !important;">','<span style="font-family: Arial, Helvetica, sans-serif !important;font-size:11px !important; color: #2e2e2e !important;">E-Mail:</span>',"</div>",'<form id="gateway_form" method="post" action="https://myaccount.nytimes.com/register?URI='+a+'&amp;ssp=1">','<input id="regiWall_isContinue" type="hidden" name="is_continue" value="false">','<input id="regiWallToken" type="hidden" name="token">','<input id="regiWallExpires" type="hidden" name="expires">','<div style="float:left !important;display:inline !important;width:200px !important;padding-bottom:10px !important;">','<input id="regiwall_email_field" type="email" name="email_address" size="32" style="border: 1px solid #bdbab8 !important; width:160px !important;line-height:18px !important; height:20px;">',"</div>",'<div style="float:left !important;clear:both !important;display:inline !important;width:138px !important;text-align:right !important;padding-top: 3px !important;padding-bottom:10px !important;">','<span style="font-family: Arial, Helvetica, sans-serif !important;font-size:11px !important; color: #2e2e2e !important;padding-right:10px !important;">Password:</span>',"</div>",'<div style="float:left !important;display:inline !important;width:200px !important;padding-bottom:10px !important;">','<input id="regiwall_password1_field" type="password" name="password1" size="32" style="border: 1px solid #bdbab8; width:160px;line-height:18px !important;height:20px;">',"</div>",'<div style="float:left !important;clear:both !important;display:inline !important;width:138px !important;text-align:right !important;padding-top: 3px !important;padding-bottom:10px !important;">','<span style="font-family: Arial, Helvetica, sans-serif;font-size:11px; color: #2e2e2e;padding-right:10px;">Retype Password:</span>',"</div>",'<div style="float:left;display:inline;width:200px;padding-bottom:10px !important;">','<input id="regiwall_password2_field" type="password" name="password2" size="32" style="border: 1px solid #bdbab8 !important; width:160px !important;line-height:18px !important;height:20px;">',"</div>",'<div style="clear:both !important; width:200px !important;margin-left:138px !important;">','<!--<input type="checkboxXXX" name="receive-updates" style="float:left !important; margin:0 5px 20px 0 !important;">-->','<input id="gateway_update_box" type="checkbox" name="subscribe[]" value="MM" checked="false" style="float:left !important; margin:0 5px 20px 0 !important;">','<p style="font-family: Arial, Helvetica, sans-serif !important;font-size:11px !important; color: #2e2e2e !important; line-height:13.75px">Receive occasional updates and special offers for The New York Times\'s products and services.</p>','<p style="font-family: Verdana, Geneva, sans-serif !important;font-size:9px !important; color: #2e2e2e !important;margin-bottom_XXX:16px !important; line-height:11.25px">Already have an NYTimes.com<br />account? <a data-content-collection="RWtoLogin" href="https://myaccount.nytimes.com/auth/login" style="text-decoration:none !important;color:#004276 !important;">Log In</a>.</p>','<!--<a href="#" style="padding:6px 16px !important;background-color:#5874c0 !important;color:#FFF !important;text-decoration: none !important;font-family: Arial, Helvetica, sans-serif !important;font-size:12px !important;">Create My Account</a>-->','<button id="gateway_form_submit" type="submit" style="padding:6px 16px !important;background-color:#5874c0 !important;color:#FFF !important;text-decoration: none !important;font-family: Arial, Helvetica, sans-serif !important;font-size:12px !important;">Create My Account</button>',"</div>",'<div id="regiWallEmptyEmailError"     class="regiWallError" style="padding-left:100px; color:#bb111d; display:none">Please enter your e-mail address.</div>','<div id="regiWallInvalidEmailError"   class="regiWallError" style="padding-left:100px; color:#bb111d; display:none">Please enter a valid e-mail address.</div>','<div id="regiWallPasswordMatchError"  class="regiWallError" style="padding-left:100px; color:#bb111d; display:none">Passwords entries must match.</div>','<div id="regiWallPasswordLengthError" class="regiWallError" style="padding-left:100px; color:#bb111d; display:none">Passwords must be between 5 and 15 characters.</div>','<div id="regiWallRequiredEmptyError"  class="regiWallError" style="padding-left:100px; color:#bb111d; display:none">Please fill in all the fields.</div>',"</form>","</div>",'<div style="width:773px !important; height: 400px !important; border: 1px solid #000 !important;">','<div style="width:734px !important; margin:auto !important; border-bottom: 1px solid #c0c0c0 !important;">','<img src="http://graphics8.nytimes.com/subscriptions/regiwall/Times-logo.png" alt="The New York Times" border="0" style="padding-left: 261px !important;"/>',"</div>",'<div style="text-align:center !important;margin-top: 28px !important;">','<span style="font-family: Times, serif !important;font-size:26px !important; color: #5874c0 !important;">To continue reading this article, please log in or register for free.</span><br/>','<span style="font-family: Arial, Helvetica, sans-serif !important;font-size:15px !important; color: #2e2e2e !important;">As a registered user, you\'ll also enjoy recommendations and the ability to save, comment, and share.</span>',"</div>","</div>","</div>"].join("\n")}}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("auth/gateway",["jquery/nyt","auth/gateway/creatives","ecomm/utils","ecomm/etTracker"],function(a,c,d,e){return b(a,c,d,"NYT5",e)}):"object"==typeof a.NYTD&&(NYTD.Gateway=b(NYTD.jQuery||window.jQuery,NYTD.GatewayCreatives,NYTD.Ecomm.Utils,"NYT4",NYTD.Ecomm.EtTracker))}(this,function(a,b,c,d,e){return function(f,g){function h(){var b,c=t();return b=null===c.offset()?"70%":a(window).height()-(c.offset().top+c.height())}var i,j,k=window.location.host.indexOf(".stg.")>0,l="http://www.nytimes.com",m=k?"http://static.stg.nytimes.com":"http://graphics8.nytimes.com",n="regi",o="pay";"NYT5"===d?i=['<div id="overlay" class="z-index-gateway-overlay" style="',"visibility: visible;","background: transparent;","background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIwLjQiLz4KICAgIDxzdG9wIG9mZnNldD0iMTAwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=);","background: -moz-linear-gradient(top, rgba(255,255,255,0.4) 0%, rgba(255,255,255,1) 100%); /* FF3.6+ */","background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,0.4)), color-stop(100%,rgba(255,255,255,1))); /* Chrome,Safari4+ */","background: -webkit-linear-gradient(top, rgba(255,255,255,0.4) 0%,rgba(255,255,255,1) 100%); /* Chrome10+,Safari5.1+ */","background: -o-linear-gradient(top, rgba(255,255,255,0.4) 0%,rgba(255,255,255,1) 100%); /* Opera 11.10+ */","background: -ms-linear-gradient(top, rgba(255,255,255,0.4) 0%,rgba(255,255,255,1) 100%); /* IE10+ */","background: linear-gradient(to bottom, rgba(255,255,255,0.4) 0%,rgba(255,255,255,1) 100%); /* W3C */","filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#66ffffff', endColorstr='#ffffff',GradientType=0 ); /* IE6-8 */",'position:fixed; width:100%; height:0px; bottom:0; left:0; display: none">',"</div>"].join(""):"NYT4"===d&&(i=['<div id="overlay" style="',"z-index:1000;","background: transparent;","background:-moz-linear-gradient(center bottom , #000, transparent);","background:-ms-linear-gradient(top, transparent, black);","background: -webkit-gradient(linear, left bottom, left top, from(#000), to(transparent));","filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000010', endColorstr='#000000');",'position:fixed; width:100%; height:0px; bottom:0; left:0; display: none">',"</div>"].join(""));var p=function(){u(i,function(){var b=void 0!==document.body.style.webkitTransition||void 0!==document.body.style.MozTransition||void 0!==document.body.style.OTransition||void 0!==document.body.style.msTransition,c=function(){a("#overlay").css("height",h())};a(window).on("resize",function(){c()}),b||a("#overlay").css("background-image","url("+m+"/images/global/backgrounds/transparentBG.gif)"),c()})},q=unescape(document.cookie).match("NYT-Edition=([^;]+)"),r=function(a,b){b=b||{},c.runWhenReady(function(){return window.NYTD&&NYTD.UPTracker&&NYTD.UPTracker.track},function(){NYTD.UPTracker.track({eventType:a,data:b})},100,50)},s=function(){return f===o?q&&"edition|GLOBAL"==q[1]?g&&""!==g?"gateway-global_"+g+".nytimes.com":"gateway-global.nytimes.com":g&&""!==g?"gateway_"+g+".nytimes.com":"gateway.nytimes.com":q&&"edition|GLOBAL"==q[1]?"regiwall-global.nytimes.com":"regiwall.nytimes.com"},t=function(){var b=a(".gateway-anchor").first(),c=a("#masthead .container").first(),d=a(".navigation").first(),e=d.next(".subNavigation"),f=a("#masthead");return b.length>0?b:c.length>0?c:e.length>0?e:d.length>0?d:f.length>0?f:a(document.body)},u=function(b,c){return document.body&&document.body.firstChild?(a("body").append(b),void(c&&c())):void setTimeout(function(){u(b,c)},100)},v=function(){function g(b){a("#regiWallEmptyEmailError, #regiWallInvalidEmailError, #regiWallPasswordMatchError, #regiWallPasswordLengthError, #regiWallRequiredEmptyError").hide(),a("#"+b).show()}var h,i=5e3,k=!1,m=function(b){var c="",d="";if(clearTimeout(h),!k){if(!b||!b.ads||"object"!=typeof b.ads.Gateway)return o();window.NYTD=window.NYTD||{},NYTD.Gateway=NYTD.Gateway||{},NYTD.Gateway.etAdxInfo={},a.each(b.ads,function(a,b){b.campaign&&(d+=b.campaign),c+=b.creative}),w(c,d)}},o=function(){clearTimeout(h),k=!0,w(f===n?b.defaultRegiCreative:b.defaultPayCreative),c.runWhenReady(function(){return a("#gatewayCreative").length},function(){j.setAnchorTracking()},100,50),r(f===n?"defaultRegiwall":"defaultGwy")},q=function(b){var c=y();a("#regiWallToken").val(b.data.token),a("#regiWallExpires").val((new Date).getTime()+93e4),c&&setTimeout(function(){document.getElementById("regiwall_form").submit()},0)},t=function(){var b=a("#regiwall_form");if(b=b[0]||null,b&&"undefined"!=typeof b.action){var c=window.location.search.replace(/[?&]gwh.*/,"");c=c.substr(1);var d=0===c.length?"?":"&",e=trackingParams,f=a.extend(!0,{},e.common,e.createAcct),g=a.param(f);c+=d+g,c=encodeURIComponent(c),c="&OQ="+c.replace(/%/g,"Q");var h=encodeURIComponent(window.location.protocol+"//")+window.location.host+encodeURIComponent(window.location.pathname)+c;d=-1===b.action.indexOf("?")?"?":"&";var i=b.action+d+"URI="+h;b.setAttribute("action",i)}},v=function(){f===n&&(a("#register-at-btn a").click(function(b){b.preventDefault(),a("#close-register-at-box").length>0&&a("#register-at-btn").hide(),a(".regiWallError").css("display","none"),a("#register-at-box").show()}),a("#close-register-at-box").click(function(b){b.preventDefault(),a("#register-at-box").hide(),a("#register-at-btn").show()}),a("#regiwall_form_submit").on("click",function(){var a=String(String.fromCharCode(97+Math.round(25*Math.random()))+(new Date).getTime()),b=document.createElement("script");return b.src="http://www.nytimes.com/svc/profile/token.jsonp?callback="+a,window[a]=q,document.getElementsByTagName("head")[0].appendChild(b),!1}),a("#regiwall_email_field, #regiwall_password1_field, #regiwall_password2_field").on("blur",x))},w=function(b,g){p();var h="width:100%; position:fixed; bottom: 80px; display: none; left:0;";"NYT4"===d&&(h+=" z-index: 1000000040;"),b=['<div id="gatewayCreative" class="z-index-gateway-overlay" style="'+h+'">','<div id="gatewayUnit" style="position:relative">'].concat(b).concat(["</div>","</div>"]).join("");var i={module:f===n?"RegiWall":"Gateway",region:"FixedCenter",pgtype:c.pageType,skipAnchorTracking:!0,trackingParams:{common:{contentId:g,priority:!0}}};j=new e(i),u(b,function(){setTimeout(function(){j.$container=a("#gatewayCreative"),a("#overlay").fadeIn(),a("#gatewayCreative").fadeIn(),v(),t(),j.setAnchorTracking()},200)})},x=function(b){var c=a(b.target),d=c.attr("id");switch(d){case"regiwall_email_field":""!==c.val()?(a("#regiWallEmptyEmailError").css("display","none"),c.val().match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?a("#regiWallInvalidEmailError").css("display","none"):a("#regiWallInvalidEmailError").css("display","block")):(a("#regiWallEmptyEmailError").css("display","block"),a("#regiWallInvalidEmailError").css("display","none"));break;case"regiwall_password1_field":case"regiwall_password2_field":var e=a("#regiwall_password1_field").val(),f=a("#regiwall_password2_field").val(),g=e&&e.length||0,h=f&&f.length||0,i=a("#regiWallPasswordMatchError"),j=a("#regiWallPasswordLengthError");"regiwall_password1_field"===d?a("#regiwall_password2_field").val().length>0&&c.val()===f?i.css("display","none"):f>0&&i.css("display","block"):"regiwall_password2_field"===d&&(c.val()===e?i.css("display","none"):i.css("display","block")),g>=5&&15>=g&&h>=5&&15>=h?j.css("display","none"):g>0&&h>0&&j.css("display","block")}},y=function(){var b=1,c=a("#regiwall_email_field"),d=c.val(),e=a("#regiwall_password1_field").val(),f=a("#regiwall_password2_field").val(),h=e&&e.length||0,i=f&&f.length||0;return""===a.trim(d)&&""===a.trim(e)&&""===a.trim(f)?(b=0,g("regiWallRequiredEmptyError")):""===a.trim(d)?(b=0,g("regiWallEmptyEmailError")):d.match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i)?""===e?(b=0,g("regiWallRequiredEmptyError")):e!==f?(b=0,g("regiWallPasswordMatchError")):(5>h||h>15||5>i||i>15)&&(b=0,g("regiWallPasswordLengthError")):(b=0,g("regiWallInvalidEmailError")),b};a.ajax({url:l+"/adx/bin/adxrun.html?v=3&jsonp=?",dataType:"jsonp",data:{page:s(),positions:"Gateway,data_country,data1,data2,data3"},success:m}),h=setTimeout(o,i)},w=function(){var b=function(){c(),e(),d()},c=function(){window.scroll(0,0),a("body").css({overflow:"hidden",margin:"0 0 85px 0","padding-right":"15px"}),a("html").css({overflow:"hidden"}),a(document).off("keypress keydown keyup touchmove"),a(document).on("keypress keydown keyup",function(a){return a.keyCode in{37:"LEFT",38:"UP",39:"RIGHT",40:"DOWN",36:"HOME",35:"END",33:"PAGEUP",34:"PAGEDOWN"}?(a.preventDefault(),!1):void 0}),a(document).on("touchmove",function(a){a.preventDefault()}),window.Event&&"function"==typeof Event.stopObserving&&(Event.stopObserving(document,"keydown"),Event.stopObserving(document,"keyup"),Event.stopObserving(document,"keypress"),Event.stopObserving(window,"keydown"),Event.stopObserving(window,"keyup"),Event.stopObserving(window,"keypress"))},d=function(){a(["#article .articleInline","#article #readerscomment","#article .articleFooter","#article .authorIdentification","#article #articleExtras","#article .articleBottomExtra","#article .emailAlertModule","#article #pageLinks","#twitter-widget-0",".videoplayerContainer","iframe",".slideShowModule","#subscribeCallToAction","#story figure"].join(",")).remove(),a(["#article .articleBody p","#content .entry-content p","#content .postContent p","#story .story-body-text"].join(",")).each(function(b,c){var d=1;if(c=a(c),0===b){var e=c.html();e.length&&e.length<400&&(d=2)}if(b==d){var f=a('<p id="subscribeCallToAction" style="text-align: center; margin-top: 28px; font-family: arial,helvetica,sans-serif; font-size: 1.2em; font-weight: bold;"><a  data-content-collection="GWtoDSLP" data-content-placement="1" class="applicationButtonLt" href="http://www.nytimes.com/articlegate" style="width: 250px; padding: 7px 25px !important; font-weight: bold; color: #004276; text-decoration: none"><span>To see the full article, subscribe here.</span></a></p>');f.insertAfter(c)}else b>d&&c.remove()})},e=function(){a("script").each(function(){return a(this).attr("src")&&a(this).attr("src").toLowerCase().indexOf("euri.ca")>0?(f("NYTClean"),window.location.reload(),!1):void 0})},f=function(a){r("domHack",{type:a})};b(),setInterval(b,1e3)};w(),v()}}),function(a,b){"use strict";"function"==typeof define&&define.amd?define("auth/gateway-d",["jquery/nyt","ecomm/utils","ecomm/etTracker"],function(a,c,d){return b(a,c,d)}):"object"==typeof a.NYTD&&(NYTD.DismissibleGW=b(NYTD.jQuery||window.jQuery,NYTD.Ecomm.Utils,NYTD.Ecomm.EtTracker))}(this,function(a,b,c){return function(d){a.ajax({url:"http://www.nytimes.com/adx/bin/adxrun.html?v=3&jsonp=?",dataType:"jsonp",data:{page:"softwall.nytimes.com",positions:"Gateway"},success:function(e){var f,g,h,i="";e&&e.ads&&(window.NYTD=window.NYTD||{},NYTD.Gateway=NYTD.Gateway||{},NYTD.Gateway.etAdxInfo={},a.each(e.ads,function(a,b){b.campaign&&(h=b.campaign),i+=b.creative}),a(function(){var e=['<div id="gateway-d">',i,"</div>"].join("");a("body").append(e),g=a("#gateway-d"),f=new c({$container:a("#gateway-d"),module:"DismissibleGateway",adxCampaignName:h,region:"FixedCenter",pgtype:b.pageType,meterCount:d.pageCount,anchorPrefix:"dgateway-",trackingParams:{common:{priority:!0}}}),g.on("click",".gw-modal-close",function(){g.fadeOut(100),f.track("gateway-dismiss","close")})}))}})}}),function(a){"use strict";if("function"==typeof define&&define.amd)define(["jquery/nyt","auth/gateway","auth/gateway-d","ecomm/utils"],function(b,c,d,e){return a(b,c,d,e)});else if("object"==typeof NYTD){var b=NYTD;b.Meter=a(b.jQuery||window.jQuery,b.Gateway,b.DismissibleGW,b.Ecomm.Utils)}}(function(a,b,c,d){"use strict";function e(){var a=document.getElementsByName("PST")[0],b=document.getElementsByTagName("title")[0],c=!1;return b&&b.innerHTML&&(c=new RegExp("Page Not Found|Page unavailable","i").test(b.innerHTML)),a&&a.content&&a.content.match(/error/i)||c}var f,g,h,i,j=window.location.host.indexOf(".stg.")>0,k=j?"http://static.stg.nytimes.com":"http://graphics8.nytimes.com",l="//meter-svc.nytimes.com/meter-echo.js?callback=?",m="//meter-svc.nytimes.com/meter.js?callback=?",n=k+"/js/gwy.js",o=[],p={loaded:!1},q=function(){r(),setTimeout(function(){E(i)},1500)},r=function(){a.ajax({dataType:"jsonp",url:l,jsonpCallback:"NYT_meterBackupCallback"})},s=function(a){a&&(d.getCookie("nyt-m")||a&&a["nyt-m"]&&d.setCookie("nyt-m",a["nyt-m"],730))};window.NYT_meterBackupCallback=s;var t=function(){window.location.replace(window.location.href.replace(/(\?|&)gwh=([^&]+)/g,"").replace(/(\?|&)gwt=([^&]+)/g,""))},u=function(a,b,c,d){var e,f,g,h;g=b?"pay":"regi",e=unescape(window.location.href).split("#"),e=e.length>1?"#"+e[1]:null,h=d?"&assetType="+d:"",a="gwh="+a+"&gwt="+g+h,f=window.location.search?window.location.href+"&"+a:window.location.href+"?"+a,f=e?f.replace(e,"")+e:f,window.location.replace(f)},v=function(){var a=d.getCookie("nyt-m")||d.getFromLocalStorage("nyt-m")||window.name||"";return d.setCookie("nyt-m",a,730),w(a),a},w=function(a){d.setToLocalStorage("nyt-m",a),window.name=a},x=function(){return v().substr(0,32)},y=function(){var a=/gwt=([^&]+)/.test(unescape(window.location.search.substring(1)))?RegExp.$1:"";return"regi"===a?"regi":"pay"},z=function(){return/gwh=([^&]+)/.test(unescape(window.location.search.substring(1)))?RegExp.$1:""},A=function(){var a=v().match(/v=i.([0-9]+)/);return a&&a[1]?parseInt(a[1],10):null},B=function(){return window.location.href.replace(/\b\?.+/g,"").replace(/\b\#.+/g,"")},C=function(a){return 27===a.keyCode?(a.preventDefault(),!1):void 0},D=function(){var a=B(window.location.href);h!=a&&(E({url:window.location.href,referrer:h}),h=a)},E=function(b){var e=[d.getFromLocalStorage("nyt-m"),window.name],f=function(b){var g=b.url||window.location.href,h=null===b.referrer||void 0===b.referrer?window.location.href:b.referrer;b.callback&&o.push(b.callback);var i,j=a("meta").filter('[name="channels"]').attr("content"),k="";"undefined"!=typeof j&&(k="&channels="+j),i=m+k,a.ajax({dataType:"jsonp",url:i,data:{url:g,referer:h},success:function(h){function i(b){var c=a(document);p.loaded=!0,p.final=!0,p.meterOn=b.meter,p.gatewayOn=b.gateway,p.hitPaypall=b.hitPaypall,p.hitRegiwall=b.hitRegiwall,p.cookieValid=b.isCookieValid,p.isLoggedIn=b.loggedIn,p.pageCount=k,p.url=g,p.assetType=j,p.counted=b.counted,b.loggedIn&&a("html").addClass("user-logged-in"),a.each(o,function(a,b){b(p)}),o=[],c.trigger("NYTD:MeterLoaded",p),c.trigger("NYTD:MeterFinal",p),c.off("keydown",C)
}var j,k=A();return h.isCookieValid===!1&&e.length>0?(d.setCookie("nyt-m",e.pop(),730),void f(b)):(h.assetType&&(j=h.assetType),r(),a("head").append('<meta name="WT.z_cad" content="'+(h.counted?"1":"0")+'" /> '),h.hitSoftPaywall?(c(p),void i(h)):h.hitPaywall||h.hitRegiwall?void u(h.hash,h.hitPaywall,h.hitRegiwall,j):void i(h))}})};a(document).on("keydown",C),b=b||{},p.loaded=!1,f(b)},F=function(){var c=/&assetType=([^&]+)/.test(unescape(window.location.search.substring(1)))?RegExp.$1:"";p.final=!0,a(document).trigger("NYTD:MeterFinal",p),r(),b?new b(y(),c):a.ajax({url:n,dataType:"script",success:function(){new NYTD.Gateway(y(),c)}})},G=function(){d.isNYT5Env()||a.ajax({dataType:"jsonp",url:m,data:{url:window.location.href},success:function(b){b.loggedIn&&a("html").addClass("user-logged-in")}})};return a(document).on("popstate",D),h=B(window.location.href),f=z(),g=x(),i={url:window.location.href,referrer:document.referrer},e()?void a(document).off("keydown",C):(v()?f?f&&!g||f!==g?t():f&&g&&f===g&&(F(),G()):E(i):q(),p.check=E,p)}),function(a,b){"use strict";"function"==typeof define&&define.amd?(define("ecomm/growl",["foundation/hosts","jquery/nyt","auth/mtr","foundation/views/page-manager","ecomm/utils","ecomm/etTracker"],function(a,c,d,e,f,g){return b(a,c,d,e,f,g)}),setTimeout(function(){require(["ecomm/growl"])},0)):"object"==typeof a.NYTD&&(NYTD.AuthGrowl=b(NYTD.Hosts,NYTD.jQuery,NYTD.Meter,void 0,NYTD.Ecomm.Utils,NYTD.Ecomm.EtTracker))}(this,function(a,b,c,d,e,f){"use strict";var g={},h=a.www||a.wwwHost;g.close=function(){g&&g.container&&g.container.fadeOut("slow",function(){g&&g.container&&(g.container.unbind("click"),g.container.remove())})};var i=function(){var a=document.cookie.match(/v=i.([0-9]+)/);return a?a[1]:void 0},j=function(){var a=b("#growlCampaignScript"),c=a.attr("data-keywords");c=c&&c.length>0?c:"";var d=a.attr("data-query");return d=d&&d.length>0?d:"",{keywords:c,query:d}},k=function(a){var c=j(),k=a.assetType,l="www.nytimes.com/growl",m=k&&""!==k?l+"_"+k:l;g.close(),a.gatewayOn!==!1&&a.meterOn!==!1&&a.counted!==!1&&b.getJSON(h+"/adx/bin/adxrun.html?v=3&jsonp=?&keywords="+c.keywords+"&page="+m+"&type=fastscript&positions=Left9,data_country,data1,data2,data3&query="+c.query,function(c){function h(){var a=b("#masthead").offset().left;a>0?g.container.css({left:a}):g.container.removeAttr("style")}function j(a){var b=a.match(/growl/i);return b&&b.length>0}var k=a.pageCount;if(c&&c.ads&&k==i()){var l=b("body");if(c.ads.Left9&&l){var m,n,o=b("meta[name='PT']").attr("content");o=o?o.replace(/\s/g,""):"Article",g.container&&g.container.off("click").remove(),n=e.appendAds(c),g.container=b(".nytdGrowlUIContainer");var p=g.container;d&&(h(),d.listenTo(d,"nyt:page-resize",h),d.listenTo(d,"nyt:page-ready",h)),j(n)&&(m=new f({$container:p,module:"Growl",region:"FixedBottom",pgtype:o,adxCampaignName:n,meterCount:k})),p.on("click",".nytdGrowlNotifyCross",function(a){m&&m.track("growl-close","close"),g.close(),a.preventDefault()}),b(document).trigger("NYTD:AuthGrowlLoaded",{count:k})}}})};return b(document).on("NYTD:MeterLoaded",function(a,b){k(b)}),c&&c.loaded&&k(c),g});